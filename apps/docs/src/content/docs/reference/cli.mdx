---
title: CLI Commands
description: Complete CLI reference for LumenFlow
---

{/* AUTO-GENERATED FILE - DO NOT EDIT DIRECTLY */}
{/* Run `pnpm docs:generate` to regenerate from source */}

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';

LumenFlow provides a comprehensive CLI for managing Work Units, memory, initiatives, and more.

<Aside type="tip">
All commands can be run via `pnpm command` (e.g., `pnpm wu:claim`).
</Aside>

## Commands Overview

| Category | Commands |
|----------|----------|
| Agent Lifecycle | [`agent:issues:query`](#agentissuesquery), [`agent:log:issue`](#agentlogissue), [`agent:session`](#agentsession), [`agent:session:end`](#agentsessionend) |
| Flow Metrics | [`flow:bottlenecks`](#flowbottlenecks), [`flow:report`](#flowreport) |
| Initiatives | [`initiative:add:wu`](#initiativeaddwu), [`initiative:bulk:assign:wus`](#initiativebulkassignwus), [`initiative:create`](#initiativecreate), [`initiative:edit`](#initiativeedit), [`initiative:list`](#initiativelist), [`initiative:status`](#initiativestatus) |
| Memory Layer | [`mem:checkpoint`](#memcheckpoint), [`mem:cleanup`](#memcleanup), [`mem:create`](#memcreate), [`mem:inbox`](#meminbox), [`mem:init`](#meminit), [`mem:ready`](#memready), [`mem:signal`](#memsignal), [`mem:start`](#memstart), [`mem:summarize`](#memsummarize), [`mem:triage`](#memtriage) |
| Metrics | [`metrics:snapshot`](#metricssnapshot) |
| Orchestration | [`orchestrate:init:status`](#orchestrateinitstatus), [`orchestrate:initiative`](#orchestrateinitiative), [`orchestrate:monitor`](#orchestratemonitor) |
| Quality Gates | [`gates`](#gates) |
| Setup | [`lumenflow`](#lumenflow), [`lumenflow:docs:sync`](#lumenflowdocssync), [`lumenflow:init`](#lumenflowinit), [`lumenflow:release`](#lumenflowrelease) |
| Sub-Agents | [`spawn:list`](#spawnlist) |
| Work Units | [`wu:block`](#wublock), [`wu:claim`](#wuclaim), [`wu:cleanup`](#wucleanup), [`wu:create`](#wucreate), [`wu:delete`](#wudelete), [`wu:deps`](#wudeps), [`wu:done`](#wudone), [`wu:edit`](#wuedit), [`wu:infer:lane`](#wuinferlane), [`wu:preflight`](#wupreflight), [`wu:prune`](#wuprune), [`wu:recover`](#wurecover), [`wu:release`](#wurelease), [`wu:repair`](#wurepair), [`wu:spawn`](#wuspawn), [`wu:status`](#wustatus), [`wu:unblock`](#wuunblock), [`wu:unlock:lane`](#wuunlocklane), [`wu:validate`](#wuvalidate) |

## Agent Lifecycle

### agent:issues:query

Query logged issues from agent sessions

```bash
pnpm agent:issues:query
```

### agent:log:issue

Log an issue encountered during agent work

```bash
pnpm agent:log:issue
```

### agent:session

Start an agent session for a WU

```bash
pnpm agent:session
```

### agent:session:end

End an agent session

```bash
pnpm agent:session:end
```

## Flow Metrics

### flow:bottlenecks

Identify workflow bottlenecks and critical path

```bash
pnpm flow:bottlenecks
```

### flow:report

Generate DORA metrics flow report

```bash
pnpm flow:report
```

## Initiatives

### initiative:add:wu

Link a WU to an initiative bidirectionally

```bash
pnpm initiative:add:wu
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--initiative &lt;ref&gt;` | Parent initiative (INIT-XXX or slug) | Yes |
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | Yes |

### initiative:bulk:assign:wus

Bulk-assign orphaned WUs to initiatives based on lane prefix rules

```bash
pnpm initiative:bulk:assign:wus
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--config &lt;path&gt;` | Path to config file (tool-specific) | No |
| `--apply` | Apply changes (default is dry-run) | No |
| `--sync-from-initiative` | Ensure WU initiative fields exist for WUs listed in initiatives | No |

### initiative:create

Create a new Initiative with micro-worktree isolation (race-safe)

```bash
pnpm initiative:create
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `-s, --slug &lt;slug&gt;` | Initiative slug (kebab-case) | Yes |
| `-t, --title &lt;title&gt;` | Work Unit title | Yes |
| `-p, --priority &lt;priority&gt;` | Priority level (P0, P1, P2, P3) | No |
| `-o, --owner &lt;owner&gt;` | Initiative owner (team or individual) | No |
| `--target-date &lt;date&gt;` | Target completion date (YYYY-MM-DD) | No |

### initiative:edit

Edit Initiative YAML files with micro-worktree isolation

```bash
pnpm initiative:edit
```

### initiative:list

List all initiatives with progress percentages

```bash
pnpm initiative:list
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--format &lt;format&gt;` | Output format (table, json, ascii, mermaid) | No |
| `--status &lt;status&gt;` | Filter by status | No |
| `--color` | Enable colored output | No |

### initiative:status

Show detailed initiative view with phases and WUs

```bash
pnpm initiative:status
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | No |
| `--format &lt;format&gt;` | Output format (table, json, ascii, mermaid) | No |
| `--color` | Enable colored output | No |

## Memory Layer

### mem:checkpoint

Create a checkpoint node for context snapshots

```bash
pnpm mem:checkpoint
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | No |

### mem:cleanup

Prune closed memory nodes based on lifecycle policy and TTL

```bash
pnpm mem:cleanup
```

### mem:create

Create a memory node with optional provenance tracking

```bash
pnpm mem:create
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | No |

### mem:inbox

Read coordination signals from other agents

```bash
pnpm mem:inbox
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | No |
| `-l, --lane &lt;lane&gt;` | Lane name (e.g., "Operations: Tooling") | No |

### mem:init

Initialize memory layer in repository

```bash
pnpm mem:init
```

### mem:ready

Query ready nodes for a WU (deterministic ordering)

```bash
pnpm mem:ready
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | Yes |

### mem:signal

Send a coordination signal to other agents

```bash
pnpm mem:signal
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | No |
| `-l, --lane &lt;lane&gt;` | Lane name (e.g., "Operations: Tooling") | No |

### mem:start

Create a session node linked to a WU

```bash
pnpm mem:start
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | Yes |

### mem:summarize

Rollup older memory nodes into summary nodes for compaction

```bash
pnpm mem:summarize
```

### mem:triage

Review discovery nodes and promote to WUs or archive

```bash
pnpm mem:triage
```

## Metrics

### metrics:snapshot

Capture current metrics snapshot for dashboards

```bash
pnpm metrics:snapshot
```

## Orchestration

### orchestrate:init:status

Show initiative orchestration status

```bash
pnpm orchestrate:init:status
```

### orchestrate:initiative

Orchestrate initiative execution with agents

```bash
pnpm orchestrate:initiative
```

### orchestrate:monitor

Monitor spawned agent progress and signals

```bash
pnpm orchestrate:monitor
```

## Quality Gates

### gates

Run quality gates with support for docs-only mode, incremental linting, and tiered testing

```bash
pnpm gates
```

## Setup

### lumenflow

Initialize LumenFlow in a project

```bash
pnpm lumenflow
```

### lumenflow:docs:sync

Sync agent onboarding docs to existing projects (skips existing files by default)

```bash
pnpm lumenflow:docs:sync
```

### lumenflow:init

Initialize LumenFlow in a project

```bash
pnpm lumenflow:init
```

### lumenflow:release

Release Command

```bash
pnpm lumenflow:release
```

## Sub-Agents

### spawn:list

Display spawn trees for WUs or initiatives

```bash
pnpm spawn:list
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `--wu &lt;wuId&gt;` | Work Unit ID to link (e.g., WU-123) | No |

## Work Units

### wu:block

Block a work unit and move it from in-progress to blocked status

```bash
pnpm wu:block
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `-r, --reason &lt;reason&gt;` | Reason for action (required with --skip-gates, --override-owner) | No |
| `-w, --worktree &lt;path&gt;` | Override worktree path | No |
| `--remove-worktree` | Remove worktree when blocking | No |
| `--no-auto` | Skip auto-updating YAML/backlog/status | No |

### wu:claim

Claim a work unit by creating a worktree/branch and updating status

```bash
pnpm wu:claim
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `-l, --lane &lt;lane&gt;` | Lane name (e.g., "Operations: Tooling") | Yes |
| `-w, --worktree &lt;path&gt;` | Override worktree path | No |
| `-b, --branch &lt;branch&gt;` | Override branch name | No |
| `--branch-only` | Use branch-only mode (no worktree) | No |
| `--pr-mode` | Use PR mode (create PR instead of auto-merge) | No |
| `--no-auto` | Skip auto-updating YAML/backlog/status | No |
| `-f, --force` | Force operation | No |
| `--force-overlap` | Force claiming despite overlap (requires --reason) | No |
| `--fix` | Auto-fix common YAML validation issues (WU-1359) | No |
| `-r, --reason &lt;reason&gt;` | Reason for action (required with --skip-gates, --override-owner) | No |
| `--allow-incomplete` | Allow claiming with incomplete spec (bypasses spec completeness, NOT schema errors) | No |
| `--resume` | Resume a WU from a crashed/killed agent (handoff) by taking over the existing worktree and updating the lock with new PID. Fails if original PID is still running (safety) or worktree does not exist. | No |
| `--skip-setup` | Skip automatic pnpm install in worktree after creation (faster claims when deps already built) | No |
| `--no-push` | Skip pushing claim branch or canonical updates (air-gapped/offline) | No |

### wu:cleanup

Clean up worktree and branch after PR merge (PR-based completion workflow)

```bash
pnpm wu:cleanup
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | No |

### wu:create

Create a new Work Unit with micro-worktree isolation (race-safe)

```bash
pnpm wu:create
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `-l, --lane &lt;lane&gt;` | Lane name (e.g., "Operations: Tooling") | Yes |
| `-t, --title &lt;title&gt;` | Work Unit title | Yes |
| `-p, --priority &lt;priority&gt;` | Priority level (P0, P1, P2, P3) | No |
| `--type &lt;type&gt;` | WU type (feature, bug, refactor, documentation) | No |
| `--initiative &lt;ref&gt;` | Parent initiative (INIT-XXX or slug) | No |
| `--phase &lt;number&gt;` | Phase number within initiative | No |
| `--blocked-by &lt;wuIds&gt;` | Comma-separated WU IDs that block this WU | No |
| `--blocks &lt;wuIds&gt;` | Comma-separated WU IDs this WU blocks | No |
| `--labels &lt;labels&gt;` | Comma-separated labels | No |
| `--assigned-to &lt;email&gt;` | Override assigned_to (defaults to git config user.email) | No |
| `--description &lt;text&gt;` | WU description text (Context/Problem/Solution) | No |
| `--acceptance &lt;criterion&gt;` | Acceptance criterion (repeatable, use multiple times) | No |
| `--code-paths &lt;paths&gt;` | Code paths (comma-separated) | No |
| `--test-paths-manual &lt;tests&gt;` | Manual test descriptions (comma-separated) | No |
| `--test-paths-unit &lt;paths&gt;` | Unit test file paths (comma-separated) | No |
| `--test-paths-e2e &lt;paths&gt;` | E2E test file paths (comma-separated) | No |
| `--validate` | Validate spec completeness (requires description, acceptance, test paths) | No |
| `--spec-refs &lt;paths&gt;` | Spec/plan references (comma-separated paths to docs, required for type: feature) | No |
| `--exposure &lt;type&gt;` | Exposure level (ui, api, backend-only, documentation) | No |
| `--user-journey &lt;text&gt;` | User journey description (recommended for ui/api exposure) | No |
| `--ui-pairing-wus &lt;wuIds&gt;` | Comma-separated UI WU IDs that consume this API (for api exposure) | No |

### wu:delete

Safely delete WU YAML files with micro-worktree isolation

```bash
pnpm wu:delete
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | No |

### wu:deps

Visualize WU dependency graph

```bash
pnpm wu:deps
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | No |
| `--format &lt;format&gt;` | Output format (table, json, ascii, mermaid) | No |
| `-d, --depth &lt;number&gt;` | Maximum traversal depth | No |
| `--direction &lt;dir&gt;` | Graph direction (up, down, both) | No |

### wu:done

WU Done Helper

```bash
pnpm wu:done
```

### wu:edit

Edit WU spec files with micro-worktree isolation

```bash
pnpm wu:edit
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `--test-paths-manual &lt;tests&gt;` | Manual test descriptions (comma-separated) | No |
| `--test-paths-unit &lt;paths&gt;` | Unit test file paths (comma-separated) | No |
| `--test-paths-e2e &lt;paths&gt;` | E2E test file paths (comma-separated) | No |
| `--exposure &lt;type&gt;` | Exposure level (ui, api, backend-only, documentation) | No |

### wu:infer:lane

WU Lane Inference CLI (WU-908)

```bash
pnpm wu:infer:lane
```

### wu:preflight

WU Preflight Validation

```bash
pnpm wu:preflight
```

### wu:prune

WU Prune Utility

```bash
pnpm wu:prune
```

### wu:recover

Analyze and fix WU state inconsistencies (WU-1090)

```bash
pnpm wu:recover
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |

### wu:release

Release an orphaned WU from in_progress back to ready state for reclaiming

```bash
pnpm wu:release
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `-r, --reason &lt;reason&gt;` | Reason for action (required with --skip-gates, --override-owner) | Yes |

### wu:repair

WU State Repair Tool (Unified - WU-1826, WU-2240)

```bash
pnpm wu:repair
```

### wu:spawn

Generate Task tool invocation for sub-agent WU execution

```bash
pnpm wu:spawn
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `--thinking` | Enable extended thinking for sub-agent WU execution | No |
| `--no-thinking` | Explicitly disable extended thinking (default behavior) | No |
| `--budget &lt;tokens&gt;` | Token budget for extended thinking (requires --thinking) | No |
| `--codex` | Output a Codex/GPT-friendly Markdown prompt (instead of Claude Task antml) | No |
| `--parent-wu &lt;wuId&gt;` | Parent WU ID for orchestrator context (e.g., WU-1000) | No |
| `--client &lt;client&gt;` | Client name (claude-code, gemini-cli, etc) | No |
| `--vendor &lt;vendor&gt;` | Deprecated alias for --client | No |

### wu:status

Show WU status, location, and valid commands (WU-1090)

```bash
pnpm wu:status
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | No |

### wu:unblock

Unblock a work unit and move it from blocked to in-progress status

```bash
pnpm wu:unblock
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | Yes |
| `-r, --reason &lt;reason&gt;` | Reason for action (required with --skip-gates, --override-owner) | No |
| `--create-worktree` | Create worktree when unblocking | No |
| `-w, --worktree &lt;path&gt;` | Override worktree path | No |
| `-b, --branch &lt;branch&gt;` | Override branch name | No |
| `--no-auto` | Skip auto-updating YAML/backlog/status | No |
| `-f, --force` | Force operation | No |

### wu:unlock:lane

Safely unlock a lane lock with audit logging

```bash
pnpm wu:unlock:lane
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-l, --lane &lt;lane&gt;` | Lane name (e.g., "Operations: Tooling") | No |
| `-r, --reason &lt;reason&gt;` | Reason for action (required with --skip-gates, --override-owner) | No |
| `-f, --force` | Force operation | No |

### wu:validate

Validate WU YAML files against schema

```bash
pnpm wu:validate
```

**Options:**

| Flag | Description | Required |
|------|-------------|----------|
| `-i, --id &lt;wuId&gt;` | Work Unit ID (e.g., WU-123) | No |

---

## Next Steps

- [Configuration](/reference/config) – Configure LumenFlow
- [WU Schema](/reference/wu-schema) – Work Unit YAML structure
