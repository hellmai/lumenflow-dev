---
title: Configuration
description: LumenFlow configuration file reference
---

{/* AUTO-GENERATED FILE - DO NOT EDIT DIRECTLY */}
{/* Run `pnpm docs:generate` to regenerate from source */}
{/* Includes formatting stabilization (WU-1157) */}

LumenFlow is configured via `.lumenflow.config.yaml` in your project root.

## Minimal Config

```yaml
version: '2.0'

lanes:
  definitions:
    - name: 'Framework: Core'
      code_paths: ['src/**']

gates:
  format: true
  lint: true
  typecheck: true
  test: true
```

## Lane Definitions

Lanes define parallel work streams with WIP enforcement. Each lane can have:

```yaml
lanes:
  definitions:
    - name: 'Framework: Core'
      wip_limit: 1 # Default: 1 (one WU at a time)
      code_paths:
        - 'packages/@lumenflow/core/**'

    - name: 'Content: Documentation'
      wip_limit: 4 # Higher limit for low-conflict parallel work
      wip_justification: 'Docs WUs are low-conflict parallel work targeting different pages'
      code_paths:
        - 'docs/**'
```

### Lane Fields

| Field               | Type     | Default | Description                                 |
| ------------------- | -------- | ------- | ------------------------------------------- |
| `name`              | string   | -       | Lane name in "Parent: Sublane" format       |
| `wip_limit`         | integer  | 1       | Maximum concurrent in-progress WUs          |
| `wip_justification` | string   | -       | Required justification when `wip_limit` > 1 |
| `code_paths`        | string[] | []      | Glob patterns for files owned by this lane  |

### WIP Justification

Philosophy: **If you need WIP > 1, you need better lanes, not higher limits.**

When `wip_limit` is greater than 1, the `wip_justification` field is required. This is soft enforcement - a warning is logged at claim time if missing, but it doesn't block the claim.

```yaml
# Warning at claim time:
# Lane "Content: Documentation" has WIP limit of 4 but no wip_justification.
# Philosophy: If you need WIP > 1, you need better lanes, not higher limits.
# Add wip_justification to .lumenflow.config.yaml to suppress this warning.
```

## Lane Health Gate

Configure how lane health checks behave during quality gates:

```yaml
gates:
  lane_health: warn # 'warn' | 'error' | 'off'
```

| Value   | Behavior                                   |
| ------- | ------------------------------------------ |
| `warn`  | Log warning if lane issues found (default) |
| `error` | Fail gates if lane issues found            |
| `off`   | Skip lane health check during gates        |

Lane health checks for:

- **Overlapping code_paths** - Files matched by multiple lanes
- **Coverage gaps** - Code files not covered by any lane

## Config Sections

### directories

Directory paths configuration

| Field            | Type   | Default                          | Description |
| ---------------- | ------ | -------------------------------- | ----------- |
| `appsWeb`        | string | `"apps/web/"`                    |             |
| `worktrees`      | string | `"worktrees/"`                   |             |
| `ai`             | string | `"ai/"`                          |             |
| `claude`         | string | `".claude/"`                     |             |
| `docs`           | string | `"docs/"`                        |             |
| `packages`       | string | `"packages/"`                    |             |
| `tools`          | string | `"tools/"`                       |             |
| `memoryBank`     | string | `"memory-bank/"`                 |             |
| `wuDir`          | string | `"docs/04-operations/tasks/wu"`  |             |
| `initiativesDir` | string | `"docs/04-operations/tasks/i...` |             |
| `backlogPath`    | string | `"docs/04-operations/tasks/b...` |             |
| `statusPath`     | string | `"docs/04-operations/tasks/s...` |             |
| `skillsDir`      | string | `".claude/skills"`               |             |
| `agentsDir`      | string | `".claude/agents"`               |             |

### beacon

Beacon paths configuration (.beacon directory structure)

| Field         | Type   | Default                     | Description |
| ------------- | ------ | --------------------------- | ----------- |
| `base`        | string | `".lumenflow"`              |             |
| `stateDir`    | string | `".lumenflow/state"`        |             |
| `stampsDir`   | string | `".lumenflow/stamps"`       |             |
| `mergeLock`   | string | `".lumenflow/merge.lock"`   |             |
| `telemetry`   | string | `".lumenflow/telemetry"`    |             |
| `flowLog`     | string | `".lumenflow/flow.log"`     |             |
| `sessions`    | string | `".lumenflow/sessions"`     |             |
| `incidents`   | string | `".lumenflow/incidents"`    |             |
| `commandsLog` | string | `".lumenflow/commands.log"` |             |

### git

Git configuration

| Field                         | Type     | Default          | Description |
| ----------------------------- | -------- | ---------------- | ----------- |
| `mainBranch`                  | string   | `"main"`         |             |
| `defaultRemote`               | string   | `"origin"`       |             |
| `laneBranchPrefix`            | string   | `"lane/"`        |             |
| `tempBranchPrefix`            | string   | `"tmp/"`         |             |
| `realGitPath`                 | string   | `"/usr/bin/git"` |             |
| `maxBranchDrift`              | integer  | `20`             |             |
| `branchDriftWarning`          | integer  | `15`             |             |
| `branchDriftInfo`             | integer  | `10`             |             |
| `agentBranchPatterns`         | string[] | `[]`             |             |
| `agentBranchPatternsOverride` | string[] | `-`              |             |
| `disableAgentPatternRegistry` | boolean  | `false`          |             |

### wu

WU (Work Unit) configuration

| Field                  | Type    | Default      | Description |
| ---------------------- | ------- | ------------ | ----------- |
| `idPattern`            | string  | `"^WU-\d+$"` |             |
| `minDescriptionLength` | integer | `50`         |             |
| `maxCommitSubject`     | integer | `100`        |             |
| `defaultPriority`      | string  | `"P2"`       |             |
| `defaultStatus`        | string  | `"ready"`    |             |
| `defaultType`          | string  | `"feature"`  |             |

### gates

Quality gates configuration

| Field                       | Type    | Default | Description                                        |
| --------------------------- | ------- | ------- | -------------------------------------------------- |
| `maxEslintWarnings`         | integer | `100`   | Maximum ESLint warnings before failure             |
| `enableCoverage`            | boolean | `true`  | Enable coverage checking                           |
| `minCoverage`               | number  | `90`    | Minimum coverage percentage                        |
| `enableSafetyCriticalTests` | boolean | `true`  | Run safety-critical test suite                     |
| `enableInvariants`          | boolean | `true`  | Check invariants                                   |
| `lane_health`               | string  | `warn`  | Lane health mode: `warn`, `error`, or `off`        |
| `execution`                 | object  | `-`     | Custom gate execution commands (see presets below) |

### memory

Memory layer configuration

| Field               | Type    | Default          | Description |
| ------------------- | ------- | ---------------- | ----------- |
| `directory`         | string  | `"memory-bank/"` |             |
| `sessionTtl`        | integer | `604800000`      |             |
| `checkpointTtl`     | integer | `2592000000`     |             |
| `enableAutoCleanup` | boolean | `true`           |             |

### ui

UI configuration

| Field                | Type    | Default | Description |
| -------------------- | ------- | ------- | ----------- |
| `errorBoxWidth`      | integer | `70`    |             |
| `statusPreviewLines` | integer | `5`     |             |
| `readinessBoxWidth`  | integer | `50`    |             |

### yaml

YAML serialization configuration

| Field       | Type    | Default | Description |
| ----------- | ------- | ------- | ----------- |
| `lineWidth` | integer | `100`   |             |

### agents

Agents configuration

| Field           | Type   | Default           | Description |
| --------------- | ------ | ----------------- | ----------- |
| `defaultClient` | string | `"claude-code"`   |             |
| `clients`       | object | `[object Object]` |             |
| `methodology`   | object | `[object Object]` |             |

### agents.methodology

Methodology defaults (agent-facing project defaults)

| Field         | Type       | Default                          | Description  |
| ------------- | ---------- | -------------------------------- | ------------ | --- |
| `enabled`     | boolean    | `true`                           |              |
| `enforcement` | "required" | "recommended"                    | `"required"` |     |
| `principles`  | string[]   | `["TDD","Hexagonal Architect...` |              |
| `notes`       | string     | `-`                              |              |

### agents.clients.\*

Client configuration (per-client settings)

| Field       | Type     | Default | Description |
| ----------- | -------- | ------- | ----------- |
| `preamble`  | unknown  | `-`     |             |
| `skillsDir` | string   | `-`     |             |
| `blocks`    | object[] | `[]`    |             |
| `skills`    | object   | `-`     |             |

## Environment Overrides

Config values can be overridden via environment variables:

```bash
LUMENFLOW_MAIN_BRANCH=develop pnpm wu:done --id WU-001
```

| Variable                | Overrides           |
| ----------------------- | ------------------- |
| `LUMENFLOW_CONFIG`      | Config file path    |
| `LUMENFLOW_MAIN_BRANCH` | `git.mainBranch`    |
| `LUMENFLOW_WU_SPECS`    | `directories.wuDir` |

## Validation

Validate your config:

```bash
pnpm exec lumenflow validate
```

---

## Next Steps

- [CLI Commands](/reference/cli) – All commands
- [WU Schema](/reference/wu-schema) – WU YAML structure
