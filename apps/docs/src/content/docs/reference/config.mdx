---
title: Configuration
description: LumenFlow configuration file reference
---

{/* AUTO-GENERATED FILE - DO NOT EDIT DIRECTLY */}
{/* Run `pnpm docs:generate` to regenerate from source */}
{/* Includes formatting stabilization (WU-1157) */}

LumenFlow is configured via `.lumenflow.config.yaml` in your project root.

## Minimal Config

```yaml
version: '2.0'

lanes:
  definitions:
    - name: 'Framework: Core'
      code_paths: ['src/**']

gates:
  format: true
  lint: true
  typecheck: true
  test: true
```

## Config Sections

### directories

Directory paths configuration

| Field            | Type   | Default                          | Description |
| ---------------- | ------ | -------------------------------- | ----------- |
| `appsWeb`        | string | `"apps/web/"`                    |             |
| `worktrees`      | string | `"worktrees/"`                   |             |
| `ai`             | string | `"ai/"`                          |             |
| `claude`         | string | `".claude/"`                     |             |
| `docs`           | string | `"docs/"`                        |             |
| `packages`       | string | `"packages/"`                    |             |
| `tools`          | string | `"tools/"`                       |             |
| `memoryBank`     | string | `"memory-bank/"`                 |             |
| `wuDir`          | string | `"docs/04-operations/tasks/wu"`  |             |
| `initiativesDir` | string | `"docs/04-operations/tasks/i...` |             |
| `backlogPath`    | string | `"docs/04-operations/tasks/b...` |             |
| `statusPath`     | string | `"docs/04-operations/tasks/s...` |             |
| `skillsDir`      | string | `".claude/skills"`               |             |
| `agentsDir`      | string | `".claude/agents"`               |             |

### beacon

Beacon paths configuration (.beacon directory structure)

| Field           | Type   | Default                     | Description |
| --------------- | ------ | --------------------------- | ----------- |
| `base`          | string | `".lumenflow"`              |             |
| `stateDir`      | string | `".lumenflow/state"`        |             |
| `archiveDir`    | string | `".lumenflow/archive"`      |             |
| `stampsDir`     | string | `".lumenflow/stamps"`       |             |
| `mergeLock`     | string | `".lumenflow/merge.lock"`   |             |
| `telemetry`     | string | `".lumenflow/telemetry"`    |             |
| `flowLog`       | string | `".lumenflow/flow.log"`     |             |
| `sessions`      | string | `".lumenflow/sessions"`     |             |
| `incidents`     | string | `".lumenflow/incidents"`    |             |
| `commandsLog`   | string | `".lumenflow/commands.log"` |             |
| `eventArchival` | object | `[object Object]`           |             |

### git

Git configuration

| Field                         | Type     | Default          | Description |
| ----------------------------- | -------- | ---------------- | ----------- |
| `mainBranch`                  | string   | `"main"`         |             |
| `defaultRemote`               | string   | `"origin"`       |             |
| `laneBranchPrefix`            | string   | `"lane/"`        |             |
| `tempBranchPrefix`            | string   | `"tmp/"`         |             |
| `realGitPath`                 | string   | `"/usr/bin/git"` |             |
| `maxBranchDrift`              | integer  | `20`             |             |
| `branchDriftWarning`          | integer  | `15`             |             |
| `branchDriftInfo`             | integer  | `10`             |             |
| `agentBranchPatterns`         | string[] | `[]`             |             |
| `agentBranchPatternsOverride` | string[] | `-`              |             |
| `disableAgentPatternRegistry` | boolean  | `false`          |             |

### wu

WU (Work Unit) configuration

| Field                  | Type    | Default      | Description |
| ---------------------- | ------- | ------------ | ----------- |
| `idPattern`            | string  | `"^WU-\d+$"` |             |
| `minDescriptionLength` | integer | `50`         |             |
| `maxCommitSubject`     | integer | `100`        |             |
| `defaultPriority`      | string  | `"P2"`       |             |
| `defaultStatus`        | string  | `"ready"`    |             |
| `defaultType`          | string  | `"feature"`  |             |

### methodology

Configure your team's testing and architecture methodology. This section provides a high-level way to set defaults that affect both agent prompting and gate enforcement.

```yaml
methodology:
  testing: 'tdd' # tdd | test-after | none
  architecture: 'hexagonal' # hexagonal | layered | none
  overrides:
    coverage_threshold: 85 # Override template default
    coverage_mode: 'warn' # block | warn | off
```

| Field          | Type   | Default       | Description                                        |
| -------------- | ------ | ------------- | -------------------------------------------------- |
| `testing`      | string | `"tdd"`       | Testing methodology: `tdd`, `test-after`, `none`   |
| `architecture` | string | `"hexagonal"` | Architecture style: `hexagonal`, `layered`, `none` |
| `overrides`    | object | `-`           | Fine-tune template defaults                        |

#### methodology.overrides

| Field                | Type   | Default | Description                                    |
| -------------------- | ------ | ------- | ---------------------------------------------- |
| `coverage_threshold` | number | `-`     | Override coverage threshold (0-100)            |
| `coverage_mode`      | string | `-`     | Override coverage mode: `block`, `warn`, `off` |

#### Template Defaults by Methodology

Each testing methodology provides sensible defaults:

| Methodology  | Coverage Threshold | Coverage Mode | Tests Required |
| ------------ | ------------------ | ------------- | -------------- |
| `tdd`        | 90%                | block         | Yes            |
| `test-after` | 70%                | warn          | Yes            |
| `none`       | 0%                 | off           | No             |

See the [Choosing Your Methodology](/guides/choosing-methodology) guide for detailed tradeoffs.

### gates

Quality gates configuration

| Field                       | Type    | Default | Description |
| --------------------------- | ------- | ------- | ----------- |
| `maxEslintWarnings`         | integer | `100`   |             |
| `enableCoverage`            | boolean | `true`  |             |
| `minCoverage`               | number  | `90`    |             |
| `enableSafetyCriticalTests` | boolean | `true`  |             |
| `enableInvariants`          | boolean | `true`  |             |
| `execution`                 | object  | `-`     |             |

### memory

Memory layer configuration

| Field               | Type    | Default           | Description |
| ------------------- | ------- | ----------------- | ----------- |
| `directory`         | string  | `"memory-bank/"`  |             |
| `sessionTtl`        | integer | `604800000`       |             |
| `checkpointTtl`     | integer | `2592000000`      |             |
| `enableAutoCleanup` | boolean | `true`            |             |
| `progress_signals`  | object  | `-`               |             |
| `signalCleanup`     | object  | `[object Object]` |             |

### memory.progress_signals

Progress signals configuration for sub-agent coordination (WU-1203)

| Field             | Type    | Default | Description |
| ----------------- | ------- | ------- | ----------- |
| `enabled`         | boolean | `false` |             |
| `frequency`       | integer | `0`     |             |
| `on_milestone`    | boolean | `true`  |             |
| `on_tests_pass`   | boolean | `true`  |             |
| `before_gates`    | boolean | `true`  |             |
| `on_blocked`      | boolean | `true`  |             |
| `auto_checkpoint` | boolean | `false` |             |

### ui

UI configuration

| Field                | Type    | Default | Description |
| -------------------- | ------- | ------- | ----------- |
| `errorBoxWidth`      | integer | `70`    |             |
| `statusPreviewLines` | integer | `5`     |             |
| `readinessBoxWidth`  | integer | `50`    |             |

### yaml

YAML serialization configuration

| Field       | Type    | Default | Description |
| ----------- | ------- | ------- | ----------- |
| `lineWidth` | integer | `100`   |             |

### agents

Agents configuration

| Field           | Type   | Default           | Description |
| --------------- | ------ | ----------------- | ----------- |
| `defaultClient` | string | `"claude-code"`   |             |
| `clients`       | object | `[object Object]` |             |
| `methodology`   | object | `[object Object]` |             |

### agents.methodology

Methodology defaults (agent-facing project defaults)

| Field         | Type       | Default                          | Description  |
| ------------- | ---------- | -------------------------------- | ------------ | --- |
| `enabled`     | boolean    | `true`                           |              |
| `enforcement` | "required" | "recommended"                    | `"required"` |     |
| `principles`  | string[]   | `["TDD","Hexagonal Architect...` |              |
| `notes`       | string     | `-`                              |              |

### agents.clients.\*

Client configuration (per-client settings)

| Field       | Type     | Default | Description |
| ----------- | -------- | ------- | ----------- |
| `preamble`  | unknown  | `-`     |             |
| `skillsDir` | string   | `-`     |             |
| `blocks`    | object[] | `[]`    |             |
| `skills`    | object   | `-`     |             |

## Environment Overrides

Config values can be overridden via environment variables:

```bash
LUMENFLOW_MAIN_BRANCH=develop pnpm wu:done --id WU-001
```

| Variable                | Overrides           |
| ----------------------- | ------------------- |
| `LUMENFLOW_CONFIG`      | Config file path    |
| `LUMENFLOW_MAIN_BRANCH` | `git.mainBranch`    |
| `LUMENFLOW_WU_SPECS`    | `directories.wuDir` |

## Validation

Validate your config:

```bash
pnpm exec lumenflow validate
```

---

## Next Steps

- [Choosing Your Methodology](/guides/choosing-methodology) – TDD vs test-after vs none
- [CLI Commands](/reference/cli) – All commands
- [WU Schema](/reference/wu-schema) – WU YAML structure
