---
title: Lanes
description: Parallel work streams with WIP limits
---

Lanes are parallel work streams that organize work by domain and prevent overload through WIP (Work-in-Progress) limits.

## Why Lanes?

Without lanes:

- Everything competes for attention
- Context switching kills productivity
- Bottlenecks form unpredictably

With lanes:

- Work is organized by domain
- Each lane has focused attention
- WIP limits prevent overload

## Defining Lanes

```yaml
# .lumenflow.config.yaml
lanes:
  - name: Core
    wip_limit: 1
    code_paths:
      - src/core/**
      - src/domain/**

  - name: UI
    wip_limit: 1
    code_paths:
      - src/components/**
      - src/pages/**

  - name: Infrastructure
    wip_limit: 1
    code_paths:
      - infra/**
      - .github/**

  - name: Documentation
    wip_limit: 1
    code_paths:
      - docs/**
```

## WIP Limits

WIP (Work-in-Progress) limits enforce **one active WU per lane** (WIP=1). This prevents:

- Context switching between multiple incomplete tasks
- Merge conflicts from parallel work in the same domain
- "Started but not finished" pile-ups

**Current behavior:** WIP=1 is enforced for all lanes. Attempting to claim a WU in an occupied lane will be blocked.

**Parallel work:** Use multiple lanes to work in parallel. Each lane can have one active WU, enabling concurrent work across different domains.

### Why WIP=1 Matters

```
High WIP (anti-pattern):
‚Üí Multiple things started, none finished
‚Üí Context switching overhead
‚Üí Long cycle times
‚Üí Merge conflicts

WIP=1 (LumenFlow default):
‚Üí Finish one thing
‚Üí Start the next
‚Üí Steady flow
‚Üí Clean merges
```

## Lane Selection

When claiming a WU, specify the lane:

```bash
pnpm wu:claim --id WU-042 --lane UI
```

The WU spec should already have a lane assignment:

```yaml
# WU-042.yaml
id: WU-042
title: Add email validation
lane: UI # ‚Üê Lane defined in spec
```

## Auto-Detection via Paths

LumenFlow can auto-detect lanes based on file paths:

```yaml
lanes:
  - name: Core
    paths:
      - src/core/**
```

If a WU's `code_paths` match, it's assigned to that lane.

## Multiple Lanes

A WU should belong to **one lane**. If work spans multiple domains:

1. **Split the WU** ‚Äì One WU per lane
2. **Choose primary** ‚Äì Assign to the most affected lane

### Example: Feature Spanning UI + Core

Instead of one WU:
‚ùå "Add user preferences (UI + API + DB)"

Split into:
‚úÖ WU-100: "Add preferences API" (lane: Core)
‚úÖ WU-101: "Add preferences UI" (lane: UI)
‚úÖ WU-102: "Add preferences schema" (lane: Infrastructure)

## Visualizing Lanes

The status file shows lane state:

```markdown
# Status

## üîß In Progress

- [WU-101 ‚Äî Add preferences UI](wu/WU-101.yaml) (lane: UI)
- [WU-100 ‚Äî Add preferences API](wu/WU-100.yaml) (lane: Core)

## üöÄ Ready

- [WU-103 ‚Äî Add dark mode toggle](wu/WU-103.yaml) (lane: UI) ‚Üê blocked (UI lane occupied)
- [WU-104 ‚Äî Add export feature](wu/WU-104.yaml) (lane: Infrastructure) ‚Üê can claim

## ‚õî Blocked

(none)
```

Note: WU-103 cannot be claimed because UI lane already has WU-101 in progress.

## Next Steps

- [Gates](/concepts/gates) ‚Äì Quality checks per lane
- [Team Workflow](/guides/team-workflow) ‚Äì Lane strategies for teams
