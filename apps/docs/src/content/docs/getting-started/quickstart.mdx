---
title: Quickstart
description: Get LumenFlow running in 5 minutes
---

import { Steps, Aside, Badge } from '@astrojs/starlight/components';

<Aside type="tip" title="AI Agents">
  If you are an AI agent, use the [Agent Start Here](/getting-started/agent-start/) guide instead.
  It provides a strict, command-only workflow optimized for autonomous execution.
</Aside>

<Aside type="caution" title="Follow These Steps Exactly">
  Execute commands in order. Do not skip steps. Do not manually edit managed files. Each command
  produces the correct output—trust the CLI.
</Aside>

## Prerequisites

Verify these tools are installed before proceeding.

```bash
node --version   # Requires 22.0.0+
pnpm --version   # Requires 9.0.0+
git --version    # Requires 2.0.0+
```

<Aside type="danger" title="DO NOT">
  Do not proceed if any version check fails. Install missing tools first.
</Aside>

---

## Step 1: Install the CLI

Run this command in your project root.

```bash
pnpm add -D @lumenflow/cli
```

<Aside type="danger" title="DO NOT">
  Do not install globally with `-g`. Install as a dev dependency so the whole team uses the same
  version.
</Aside>

---

## Step 2: Initialize LumenFlow

Run this command. It creates all required configuration files.

```bash
pnpm exec lumenflow
```

This creates:

- `.lumenflow.config.yaml` — Configuration (managed)
- `LUMENFLOW.md` — Workflow entry point (managed)
- `AGENTS.md` — Universal AI agent entry point (user-owned, LumenFlow inserts managed section)
- `.lumenflow/constraints.md` — Non-negotiable constraints (managed)
- `docs/tasks/` — Task storage (default path, or `docs/04-operations/tasks/` for arc42 projects)

<Aside type="tip" title="AGENTS.md is user-owned">
  You can add your own content to AGENTS.md. LumenFlow uses bounded markers (`<!-- LUMENFLOW:START -->` / `<!-- LUMENFLOW:END -->`) to manage its section without overwriting yours. Use `--merge` when re-running init on existing projects.
</Aside>

<Aside type="danger" title="DO NOT">
  Do not manually create these files. Do not edit `.lumenflow.config.yaml` by hand. Use CLI commands
  to modify configuration.
</Aside>

---

## Step 3: Verify Scripts Were Injected

LumenFlow automatically adds scripts to your `package.json` during initialization. Verify they exist.

```bash
pnpm wu:create --help
```

If this command works, scripts are correctly installed. If not, re-run initialization.

```bash
pnpm exec lumenflow --force
```

<Aside type="tip" title="Scripts are auto-managed">
  You do not need to manually add scripts. LumenFlow injects them during `pnpm exec lumenflow`.
  Re-run with `--force` if scripts are missing.
</Aside>

---

## Step 4: Create an Initiative (Optional)

For multi-phase projects or product visions, create an Initiative first.

```bash
pnpm initiative:create \
  --id INIT-001 \
  --slug "my-project" \
  --title "My Project" \
  --owner "team@example.com"

# Add phases after creation
pnpm initiative:edit --id INIT-001 --add-phase "Phase 1: MVP"
pnpm initiative:edit --id INIT-001 --add-phase "Phase 2: Polish"
```

Skip this step for single-task work or bug fixes.

---

## Step 5: Create Your First Work Unit

Run this command. Replace the values with your actual task details.

```bash
pnpm wu:create \
  --title "Fix login error banner" \
  --lane "Experience: UI" \
  --type bug \
  --exposure ui \
  --description "Fix error banner overlap on small screens" \
  --acceptance "Error banner no longer overlaps the form on mobile widths" \
  --code-paths "src/components/LoginError.tsx" \
  --test-paths-unit "src/components/__tests__/LoginError.test.tsx"
```

The CLI prints a WU ID (example: `WU-123`). Use this ID in subsequent commands.

<Aside type="danger" title="DO NOT">
  Do not manually create WU YAML files. Do not manually edit WU YAML files. Use `pnpm wu:create` and
  `pnpm wu:edit` commands. Default path is `docs/tasks/wu/` (or `docs/04-operations/tasks/wu/` for
  arc42 projects).
</Aside>

---

## Step 6: Claim the Work Unit

Run this command with the ID from Step 5.

```bash
pnpm wu:claim --id WU-123 --lane "Experience: UI"
```

This creates a worktree at `worktrees/experience-ui-wu-123/`.

<Aside type="danger" title="DO NOT">
  Do not skip this step. Do not work on main branch. Do not use `git worktree add` directly.
</Aside>

---

## Step 7: Enter the Worktree

Run this command immediately after claiming.

```bash
cd worktrees/experience-ui-wu-123
```

All work happens inside this directory.

<Aside type="danger" title="DO NOT">
  Do not edit files on main branch. Do not use absolute paths that point outside the worktree.
  Always use relative paths.
</Aside>

---

## Step 8: Implement and Commit

Write your code. Write tests. Commit your changes.

```bash
# Write code and tests, then commit
git add .
git commit -m "fix: resolve error banner overlap on mobile"
```

<Aside type="danger" title="DO NOT">
  Do not commit without tests. Do not use `--no-verify` to skip hooks. Fix any hook failures
  properly.
</Aside>

---

## Step 9: Run Gates in Worktree

Run this command from inside the worktree.

```bash
pnpm wu:prep --id WU-123
```

This runs all quality gates (format, lint, typecheck, test). It prints the next command to run.

<Aside type="danger" title="DO NOT">
  Do not skip gates. Do not proceed if gates fail. Fix failures before continuing.
</Aside>

---

## Step 10: Complete the Work Unit

Run this command from the **main checkout** (not the worktree).

```bash
cd /path/to/your/repo
pnpm wu:done --id WU-123
```

This merges your work to main, creates a completion stamp, and removes the worktree.

<Aside type="danger" title="DO NOT">
  Do not run `wu:done` from inside the worktree. Do not manually merge branches. Do not manually
  create stamp files.
</Aside>

---

## Verify Success

After `wu:done` completes, verify these conditions.

- WU YAML status is `done`
- Stamp file exists at `.lumenflow/stamps/WU-123.done`
- Worktree directory is removed
- Changes are on main branch

---

## File Ownership

LumenFlow manages certain files automatically. Understand which files you own.

| File/Directory              | Owner     | Action                                                       |
| --------------------------- | --------- | ------------------------------------------------------------ |
| `.lumenflow.config.yaml`    | LumenFlow | Do not edit manually. Use CLI commands.                      |
| `LUMENFLOW.md`              | LumenFlow | Do not edit. Regenerated on init.                            |
| `AGENTS.md`                 | You       | User-owned. LumenFlow manages section via markers.           |
| `.lumenflow/constraints.md` | LumenFlow | Do not edit. Contains workflow rules.                        |
| `.lumenflow/stamps/`        | LumenFlow | Do not create manually. Created by `wu:done`.                |
| `docs/tasks/wu/*.yaml`      | LumenFlow | Do not create/edit manually. Use `wu:create`/`wu:edit`.      |
| `docs/tasks/backlog.md`     | LumenFlow | Do not edit. Regenerated from state.                         |
| `docs/tasks/status.md`      | LumenFlow | Do not edit. Regenerated from state.                         |
| `worktrees/`                | LumenFlow | Do not create manually. Created by `wu:claim`.               |
| Your source code            | You       | Edit freely inside worktrees.                                |
| Your tests                  | You       | Edit freely inside worktrees.                                |
| `package.json` scripts      | LumenFlow | Auto-injected during init. Re-run with `--force` if missing. |

---

## Common Mistakes

Avoid these errors. The left column shows correct behavior. The right column shows mistakes.

| Correct                                     | Mistake                                |
| ------------------------------------------- | -------------------------------------- |
| `pnpm wu:create --title "..."`              | Manually creating WU YAML files        |
| `pnpm wu:claim --id WU-123`                 | Using `git worktree add` directly      |
| `cd worktrees/experience-ui-wu-123`         | Editing files on main branch           |
| `pnpm wu:prep --id WU-123` (from worktree)  | Skipping gates                         |
| `pnpm wu:done --id WU-123` (from main)      | Running `wu:done` from inside worktree |
| Use relative paths inside worktree          | Using absolute paths to main checkout  |
| Fix hook failures                           | Using `--no-verify` to skip hooks      |
| `pnpm wu:edit --id WU-123 --status blocked` | Manually editing WU YAML status field  |
| Let CLI manage backlog.md                   | Manually editing backlog.md            |
| Let CLI manage stamps                       | Manually creating `.done` stamp files  |

---

## Command Reference

| Command                                  | Description                    |
| ---------------------------------------- | ------------------------------ |
| `pnpm exec lumenflow`                    | Initialize LumenFlow           |
| `pnpm wu:create --title "..." ...`       | Create a new Work Unit         |
| `pnpm wu:claim --id WU-XXX --lane "..."` | Claim WU and create worktree   |
| `pnpm wu:prep --id WU-XXX`               | Run gates in worktree          |
| `pnpm wu:done --id WU-XXX`               | Complete WU, merge, cleanup    |
| `pnpm wu:edit --id WU-XXX --field value` | Edit WU fields                 |
| `pnpm gates`                             | Run quality gates (standalone) |

Run any command with `--help` for all options.

```bash
pnpm wu:create --help
pnpm gates --help
```

---

## Next Steps

- [Install GitHub App](/getting-started/github-app) — Add PR validation and team enforcement
- [Work Units](/concepts/work-units) — Understand WU lifecycle and fields
- [Gates](/concepts/gates) — Learn about quality gates
- [Configuration](/reference/config) — Full configuration reference
