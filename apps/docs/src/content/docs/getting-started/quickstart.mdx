---
title: Quickstart
description: Get LumenFlow running in 5 minutes
---

import { Steps, Tabs, TabItem, Aside } from '@astrojs/starlight/components';

This guide gets you from zero to a working LumenFlow setup in under 5 minutes.

## Try It Now (30 Seconds)

```bash
# Install the CLI
pnpm add -D @lumenflow/cli

# Initialize LumenFlow
pnpm exec lumenflow
```

That's it. Your project now speaks LumenFlow. Any AI coding assistant can read `AGENTS.md` and understand your workflow.

<Aside type="tip" title="Alternative: npx">
  If you prefer not to install first, you can run `npx @lumenflow/cli` directly. However, installing
  as a dev dependency is recommended for consistent versioning across your team.
</Aside>

Want the full experience with worktree isolation, automated gates, and 40+ CLI commands? Keep reading.

---

<Tabs>
  <TabItem label="npm CLI (Recommended)">

## Full Setup with CLI

The CLI provides the complete LumenFlow experience with automated workflows, worktree isolation, and 40+ commands for managing your development process.

### Prerequisites

- Node.js 22+ (LTS recommended)
- pnpm (recommended) or npm
- A Git repository

<Steps>

1. **Install the CLI**

   <Tabs syncKey="pkg">
     <TabItem label="pnpm">```bash pnpm add -D @lumenflow/cli ```</TabItem>
     <TabItem label="npm">```bash npm install -D @lumenflow/cli ```</TabItem>
   </Tabs>

2. **Initialize LumenFlow**

   ```bash
   pnpm exec lumenflow
   ```

   This creates:
   - `.lumenflow.config.yaml` – Your configuration
   - `LUMENFLOW.md` – Workflow entry point
   - `AGENTS.md` – Universal AI agent entry point
   - `.lumenflow/constraints.md` – Non-negotiable constraints
   - `.lumenflow/agents/` – Vendor-agnostic agent guidance

   Optional flags:
   - `--full` – Add `docs/04-operations/tasks/` (backlog, status, templates)
   - `--framework nextjs` – Add framework hint + overlay docs
   - `--client claude|cursor|windsurf|cline|codex|all` – Add client-specific overlay files
   - `--merge` – Safely merge into existing files (preserves your content)

3. **Add scripts to package.json**

   ```json
   {
     "scripts": {
       "wu:create": "wu-create",
       "wu:claim": "wu-claim",
       "wu:prep": "wu-prep",
       "wu:done": "wu-done",
       "gates": "gates"
     }
   }
   ```

4. **Create your first Work Unit**

   ```bash
   # ID is auto-generated if not provided (use the printed ID in later steps)
   npx wu-create \
     --title "Fix login error banner" \
     --lane "Experience: UI" \
     --type bug \
     --exposure ui \
     --description "Fix error banner overlap on small screens" \
     --acceptance "Error banner no longer overlaps the form on mobile widths" \
     --code-paths "src/components/LoginError.tsx" \
     --test-paths-unit "src/components/__tests__/LoginError.test.tsx"

   # If you need a specific ID (e.g., to reference a plan), add --id WU-001
   ```

   <Aside type="tip">
     `wu:create` validates a full spec up front. Use `wu:edit` later if you need to refine details.
   </Aside>

5. **Claim and start work**

   ```bash
   # Use the ID printed by wu-create (example: WU-123)
   npx wu-claim --id WU-123 --lane "Experience: UI"
   cd worktrees/experience-ui-wu-123
   ```

</Steps>

### Daily CLI Workflow

```bash
# 1. Claim a WU from the backlog
npx wu-claim --id WU-XXX --lane "Framework: Core"

# 2. Work in the worktree (isolated branch)
cd worktrees/framework-core-wu-xxx
# ... make changes ...

# 3. Run gates in the worktree
npx wu-prep --id WU-XXX

# 4. Complete the WU (merges to main, from repo root)
cd /path/to/repo
npx wu-done --id WU-XXX
```

<Aside type="caution">
  Run `wu:prep` from the worktree (it runs gates there), then run `wu:done` from the main repository
  checkout. The worktree is automatically cleaned up after completion.
</Aside>

### Key CLI Commands

| Command       | Description                       |
| ------------- | --------------------------------- |
| `lumenflow`   | Initialize LumenFlow in a project |
| `wu-create`   | Create a new Work Unit            |
| `wu-claim`    | Claim a WU and create worktree    |
| `wu-prep`     | Run gates in worktree             |
| `wu-done`     | Complete WU, merge, and cleanup   |
| `gates`       | Run quality gates (standalone)    |
| `flow-report` | Generate DORA metrics report      |

Run any command with `--help` to see all options:

```bash
pnpm exec wu-create --help
pnpm exec gates --help
```

  </TabItem>
  <TabItem label="GitHub App Only">

## Lightweight Setup (No CLI)

If you prefer not to install the CLI, you can use LumenFlow with just the GitHub App. You'll manage WU YAML files manually, and the GitHub App handles PR validation and gate enforcement.

<Steps>

1. **Install the GitHub App**

   Go to the [GitHub Marketplace](https://github.com/apps/lumenflow-gates) and click **Install**.
   Select your repository and authorize.

2. **Add configuration file**

   Create `.lumenflow.config.yaml` in your repo root:

   ```yaml
   version: '2.0'

   directories:
     wu_specs: docs/04-operations/tasks/wu
     stamps: .lumenflow/stamps

   lanes:
     enforcement:
       require_parent: true
       allow_custom: false
     definitions:
       - name: 'Framework: Core'
         wip_limit: 3
       - name: 'Operations: Infrastructure'
         wip_limit: 2

   gates:
     execution:
       format: 'npm run format:check'
       lint: 'npm run lint'
       typecheck: 'npm run typecheck'
       test: 'npm test'
   ```

3. **Create the tasks directory**

   Create `docs/04-operations/tasks/backlog.md`:

   ```markdown
   # Backlog

   ## Ready

   - [WU-001 — My first task](wu/WU-001.yaml)

   ## In Progress

   ## Done
   ```

4. **Create your first Work Unit**

   Create `docs/04-operations/tasks/wu/WU-001.yaml`:

   ```yaml
   id: WU-001
   title: My first task
   lane: 'Framework: Core'
   type: feature
   status: ready
   priority: P2
   description: |
     A simple task to test LumenFlow.
   acceptance:
     - The feature works
   code_paths:
     - src/
   ```

   <Aside type="tip">
     Lane names must use the "Parent: Sublane" format (e.g., `Framework: Core`, `Operations:
     Infrastructure`). This is enforced by the `lanes.enforcement.require_parent` setting.
   </Aside>

5. **Open a Pull Request**

   Create a branch, make changes, and open a PR. The LumenFlow GitHub App will:
   - Validate your WU spec
   - Run your configured gates
   - Add status checks to the PR

</Steps>

<Aside>
  With the GitHub App only approach, you manage WU YAML files manually. For automated worktree
  management, metrics, and agent coordination, also install the CLI (`npm install -g
  @lumenflow/cli`).
</Aside>

  </TabItem>
</Tabs>

## Verify It's Working

After your first PR or `wu:done`, you should see:

- ✅ WU status changed to `done`
- ✅ Stamp file created in `.lumenflow/stamps/`
- ✅ PR checks pass (if using GitHub App)
- ✅ Backlog updated

## Sample Configuration

Here's a complete `.lumenflow.config.yaml` for reference:

```yaml
version: '2.0'

directories:
  wu_specs: docs/04-operations/tasks/wu
  backlog: docs/04-operations/tasks/backlog.md
  status: docs/04-operations/tasks/status.md
  stamps: .lumenflow/stamps

worktree_pattern: 'worktrees/{lane}-{wu_id}'

lanes:
  enforcement:
    require_parent: true # Lanes must be "Parent: Sublane" format
    allow_custom: false # Only predefined lanes allowed
  definitions:
    - name: 'Framework: Core'
      wip_limit: 3
      code_paths:
        - packages/core/**
    - name: 'Experience: UI'
      wip_limit: 2
      code_paths:
        - apps/web/**
        - packages/components/**
    - name: 'Operations: Infrastructure'
      wip_limit: 2
      code_paths:
        - .github/**
        - infra/**

gates:
  execution:
    preset: 'node' # Or use custom commands
    format: 'npx prettier --check .'
    lint: 'npm run lint'
    typecheck: 'npm run typecheck'
    test: 'npm test'

git:
  main_branch: main
```

## Next Steps

- [Install GitHub App](/getting-started/github-app) – PR validation and team enforcement
- [Work Units](/concepts/work-units) – Deep dive on WUs
- [Gates](/concepts/gates) – Understanding quality gates
- [Configuration](/reference/config) – Full config reference
