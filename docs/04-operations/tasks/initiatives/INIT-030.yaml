id: INIT-030
slug: runtime-adoption-strangler-fig
title: KernelRuntime Adoption and Command Migration
description: 'Feature-forward runtime adoption plan after INIT-029: complete remaining constant
  extraction, migrate command execution from CLI shell-outs to direct KernelRuntime calls in
  existing MCP/CLI packages, and close adoption metrics using a parity-safe strangler migration.'
status: in_progress
priority: P1
owner: 'Framework: Core'
created: 2026-02-17
target_date: 2026-07-31
phases:
  - id: 1
    title: 'Foundation: remaining DRY/constants extraction'
    status: done
  - id: 2
    title: Command migration in existing MCP/CLI packages
    status: done
  - id: 3
    title: Pack workflow expression via runtime
    status: in_progress
  - id: 4
    title: Metric closure and runCliCommand deprecation path
    status: in_progress
success_metrics:
  - Migrated commands execute through KernelRuntime without runCliCommand shell-out
  - MCP and CLI parity gates remain green for migrated commands
  - Runtime adoption proceeds in old production packages via strangler-fig migration
  - MCP shell-out call sites in `packages/@lumenflow/mcp/src/tools/*.ts` remain non-increasing from
    baseline 100 and ratchet to timeline checkpoints in the INIT-030 roadmap artifact
labels: []
wus:
  - WU-1784
  - WU-1785
  - WU-1786
  - WU-1787
  - WU-1788
  - WU-1789
  - WU-1793
  - WU-1795
  - WU-1794
  - WU-1848
  - WU-1849
