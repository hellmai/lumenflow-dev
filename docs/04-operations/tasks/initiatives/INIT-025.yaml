id: INIT-025
slug: god-file-decomposition
title: God File Decomposition Initiative
description: Deliver enterprise-grade decomposition with state-machine-first hardening of wu:done
  (explicit XState pipeline, staged rollback consolidation, and gate dedup baseline), followed by
  mechanical god-file splits and cleanup coverage work.
status: in_progress
priority: P1
owner: Framework Team
created: 2026-02-12
target_date: 2026-02-28
phases:
  - id: 1
    title: 'Phase 1: State-Machine Foundation'
    status: done
  - id: 2
    title: 'Phase 2: Mechanical Decomposition'
    status: done
  - id: 3
    title: 'Phase 3: Coverage Hardening + Cleanup'
    status: done
success_metrics:
  - All listed decompositions are completed via new files + thin barrels with backward-compatible
    exports
  - No remaining target file exceeds 800 lines in decomposed scope (except explicit exceptions)
  - Plan artifact is linked and maintained in repo via LumenFlow tooling.
labels: []
notes:
  - '2026-02-13 reconciliation: WU-1621 completed prerequisite initiative metadata hardening;
    decomposition execution scope remains pending. INIT-025 reopened to in_progress.'
  - '2026-02-13 WU-1639: initiative metadata reconciled with delivered scope; decomposition
    execution WUs remain to be planned and executed.'
  - '2026-02-13 post-WU-1640: reopened for execution; decomposition phases/WUs still pending
    delivery.'
  - '2026-02-13 phase interpretation for execution: Phase 1 = reconciliation + wu:done state machine
    foundation; Phase 2 = mechanical decomposition WUs; Phase 3 = coverage hardening and legacy
    rollback cleanup.'
  - '2026-02-13 execution kickoff: Phase 1 reconciliation/state-machine foundation WUs
    (WU-1661..WU-1666) are now specified and ready for claim order.'
  - 2026-02-13 WU-1667 delivered --phase-title support; phase titles updated to reflect
    state-machine-first execution sequence.
  - '2026-02-13 WU-1659 (done): gate dedup baseline established -- wu:done no longer runs full gates
    redundantly after a successful wu:prep pass. This is the gate amplification fix that informs
    INIT-025 Phase 1 state-machine work (WU-1662..WU-1666).'
  - '2026-02-13 @xstate/test deprecation decision: use @xstate/graph (XState v5 compatible) for
    model-based transition coverage instead of the deprecated @xstate/test package. Applies to
    WU-1666 and any future model-based testing within INIT-025.'
  - '2026-02-13 WU-1646 supersession: WU-1646 (mechanical wu-done.ts extraction) is superseded by
    the state-machine foundation WUs (WU-1662..WU-1665). WU-1646 remains as a Phase 2 fallback only
    if state-machine WUs fail to deliver. If Phase 1 completes successfully, WU-1646 should be
    closed as superseded.'
  - '2026-02-13 WU-1661 reconciliation: phase titles, execution ordering, WU-1659 gate dedup
    baseline, @xstate/test deprecation decision, and WU-1646 supersession guidance are now
    explicitly documented in initiative metadata and plan.'
  - '2026-02-13 Phase 2 complete: all mechanical decomposition WUs (WU-1642..1652) delivered.
    WU-1646 deleted as superseded by Phase 1 state-machine WUs.'
related_plan: lumenflow://plans/INIT-025-plan.md
lanes:
  - 'Content: Specs Governance'
  - 'Framework: Core State Recovery'
  - 'Framework: CLI WU Commands'
  - 'Framework: Core Lifecycle'
