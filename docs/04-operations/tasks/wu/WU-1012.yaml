id: WU-1012
title: Add --docs-only flag to wu:done for documentation WUs
lane: CLI
type: feature
status: done
priority: P2
created: 2026-01-18
code_paths:
  - packages/@lumenflow/cli/src/wu-done.ts
  - packages/@lumenflow/core/src/arg-parser.ts
  - packages/@lumenflow/core/src/wu-done-validators.ts
tests:
  manual:
    - wu:done --docs-only works for documentation WUs
  unit:
    - packages/@lumenflow/cli/__tests__/wu-done.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1012.done
dependencies:
  - WU-1011
initiative: INIT-001
phase: 1
spec_refs:
  - internal
risks:
  - Could be abused to skip gates on non-docs WUs
notes: |-
  Discovered during WU-1008: --skip-gates requires --fix-wu which
  doesn't make sense for docs-only WUs where no code is broken.

  Proposal: Add --docs-only flag that:
  1. Validates WU type is documentation or code_paths are docs/**
  2. Skips code-related gates (lint, typecheck, test)
  3. Still runs format gate on markdown/mdx files


  [ADMIN-REPAIR 2026-01-19]: lane changed from 'Core' to 'CLI'
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: |
  Add a --docs-only flag to wu:done for documentation-only WUs.

  Context: During WU-1008, couldn't use --skip-gates because it
  requires --fix-wu, which doesn't fit docs-only changes.

  Problem: No clean way to complete docs-only WUs when gates
  can't run (e.g., worktree build issues).

  Solution: Add --docs-only flag that validates the WU is
  documentation-focused and runs appropriate subset of gates.
acceptance:
  - --docs-only flag exists on wu:done
  - Flag validates WU exposure is 'documentation'
  - Format gate still runs on markdown files
  - Code gates (lint, typecheck, test) are skipped
  - Clear error if used on non-docs WU
claimed_mode: worktree
worktree_path: worktrees/cli-wu-1012
claimed_at: 2026-01-19T09:52:21.768Z
baseline_main_sha: adee9a0a037e055cb4866a840e11b54bbb35ebe5
session_id: 862ff441-edf7-46fe-9884-25bb391e8ef0
approved_by:
  - tom@hellm.ai
approved_at: 2026-01-19T09:52:21.773Z
locked: true
completed_at: 2026-01-19T10:03:06.079Z
