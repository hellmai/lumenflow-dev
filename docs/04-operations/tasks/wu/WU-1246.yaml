id: WU-1246
title: Auto-generate WU IDs in wu:create when --id not provided
lane: 'Framework: CLI'
type: feature
status: done
priority: P2
created: 2026-01-30
code_paths:
  - packages/@lumenflow/cli/src/wu-create.ts
  - packages/@lumenflow/core/src/wu-id-generator.ts
tests:
  manual:
    - Verify acceptance criteria met
  unit:
    - packages/@lumenflow/core/src/__tests__/wu-id-generator.test.ts
    - packages/@lumenflow/cli/__tests__/wu-create-auto-id.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1246.done
dependencies: []
spec_refs:
  - internal
risks: []
notes: Completed per acceptance criteria.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: Currently wu:create requires --id WU-XXXX to be specified manually. This
  leads to collisions when multiple agents work in parallel, requires checking existing IDs, and
  creates friction. Problem: Manual ID assignment is error-prone and unnecessary coordination
  overhead. Agents must check backlog for next available ID before creating WUs. Solution: Make --id
  optional. When omitted, wu:create should auto-generate the next available WU ID by scanning
  existing WU YAMLs, finding the highest numeric ID, and incrementing. Output the generated ID so
  the user knows what was created. Keep --id as optional override for specific cases (e.g.,
  reserving a block of IDs).'
acceptance:
  - wu:create works without --id flag
  - Auto-generated ID is next sequential after highest existing WU-NNNN
  - Generated ID printed clearly in output
  - --id flag still works as explicit override
  - Concurrent wu:create calls handle race conditions (retry on conflict)
  - Unit tests cover ID generation and conflict handling
  - Documentation updated
  - CLAUDE.md updated with new wu:create usage (--id now optional)
  - LUMENFLOW.md Quick Start section updated
  - Starlight docs CLI reference updated (lumenflow.dev)
  - npm package README updated
  - --help output shows --id as optional with auto-generation note
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-wu-1246
claimed_at: 2026-01-30T12:54:33.194Z
baseline_main_sha: 1b2d54885ae137506b5ebd92fdb12c7bb2027fea
session_id: fcbcb3d1-5896-4a63-9d1f-a10c3462aec4
approved_by:
  - tom@hellm.ai
approved_at: 2026-01-30T12:54:33.200Z
locked: true
completed_at: 2026-01-30T13:27:58.496Z
