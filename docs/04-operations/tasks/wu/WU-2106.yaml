id: WU-2106
title: Eliminate residual hardcoded docs-layout literals and audit config-driven abstraction
lane: 'Framework: Core Lifecycle'
type: refactor
status: ready
priority: P1
created: 2026-02-24
code_paths:
  - packages/@lumenflow/core/src
  - packages/@lumenflow/cli/src
  - packages/@lumenflow/core/src/__tests__
  - packages/@lumenflow/cli/src/__tests__
  - docs/04-operations/_frameworks/lumenflow/agent/onboarding
tests:
  manual:
    - Run rg scan to confirm no runtime fallback logic remains for docs layout path discovery
      outside explicit preset definitions.
    - Run lumenflow init in a temp repo for both simple and arc42 docs structure and verify
      generated workspace directories resolve through config.
  unit:
    - packages/@lumenflow/core/src/__tests__/path-centralization.test.ts
    - packages/@lumenflow/core/src/__tests__/wu-paths.test.ts
    - packages/@lumenflow/cli/src/__tests__/sync-templates.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2106.done
dependencies: []
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: WU-2105 removed several path fallbacks and dead constants, but there are
  still residual hardcoded docs-layout strings and depth assumptions in runtime-facing
  code/comments. Problem: Hardcoded layout literals and ad-hoc discovery logic weaken abstraction
  boundaries and make config-first behavior harder to reason about and evolve. Solution: sweep
  runtime code for remaining non-config docs-layout literals, replace them with
  workspace/config-driven resolution where appropriate, remove dead or misleading
  constants/comments, and run a broader hardcoding audit to identify similar anti-patterns with
  concrete remediation guidance.'
acceptance:
  - Runtime code paths and root resolution are config-driven without arc42/simple fallback
    heuristics outside explicit layout presets.
  - No dead path-regex constants remain for WU path discovery.
  - Targeted tests cover changed behavior and pass.
  - Audit summary identifies any remaining high-risk hardcoded patterns and whether they are
    preset-definitions, docs/examples, tests, or runtime code.
