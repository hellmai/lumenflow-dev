id: WU-1421
title: Rename .beacon to .lumenflow (complete ExampleApp migration)
lane: 'Framework: Core'
type: refactor
status: in_progress
priority: P2
created: 2026-02-04
code_paths:
  - packages/@lumenflow/core/src/spawn-monitor.ts
  - packages/@lumenflow/core/src/spawn-escalation.ts
tests:
  manual:
    - Run pnpm test spawn-monitor to verify checkZombieLocks uses LUMENFLOW_PATHS.LOCKS_DIR
    - Verify no .beacon directory exists in the repository root
    - Verify spawn locks are created under .lumenflow/locks/
  unit:
    - packages/@lumenflow/core/src/__tests__/spawn-monitor.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1421.done
dependencies: []
risks: []
notes: >
  Implementation notes: Fixed spawn-monitor.ts and spawn-escalation.ts to use
  LUMENFLOW_PATHS constants instead of hardcoded .beacon paths. Removed the legacy
  .beacon/state/wu-events.jsonl file. Migration utilities (beacon-migration.ts) and
  backward compatibility patterns preserved for legacy project support.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: "Context: .beacon/ directory is a legacy artifact from migrating LumenFlow out of
  ExampleApp. Problem: Confusing naming - '.beacon' has no meaning in LumenFlow context.
  spawn-monitor.ts uses .beacon/locks/ while lane-lock.ts uses .lumenflow/locks/, creating
  inconsistency. Solution: Rename all .beacon references to .lumenflow, consolidate lock
  directories, update all code paths."
acceptance:
  - .beacon directory renamed to .lumenflow or consolidated into existing .lumenflow
  - spawn-monitor.ts uses .lumenflow/locks/ (same as lane-lock.ts)
  - No references to 'beacon' remain in codebase (except git history)
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-core-wu-1421
claimed_at: 2026-02-04T16:24:40.178Z
baseline_main_sha: 87d096b926f0325aebbc8fa17b602ef459c90f0c
session_id: 5c3c5fd5-c213-4547-99c2-299b40fe4be2
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-04T16:24:40.183Z
