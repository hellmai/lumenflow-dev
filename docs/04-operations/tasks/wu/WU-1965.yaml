id: WU-1965
title: Fix lumenflow init duplicate Created/Skipped output for onboarding docs
lane: 'Framework: CLI Enforcement'
type: bug
status: ready
priority: P3
created: 2026-02-21
code_paths:
  - packages/@lumenflow/cli/src/init.ts
tests:
  manual:
    - Run lumenflow init --client claude on empty dir, verify no file appears in both Created and Skipped
  unit:
    - packages/@lumenflow/cli/tests/init-scaffold-dedup.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1965.done
dependencies: []
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: lumenflow init --client claude scaffolds agent onboarding docs twice -- once via scaffoldFullDocs() (full mode is default) and again via scaffoldClientFiles() (added by WU-1083 to ensure Claude always gets docs even without --full). Problem: The second call finds files already created by the first call, so they appear in both Created and Skipped sections of init output. This is confusing for users. Solution: Guard the second call in scaffoldClientFiles() with a check for full mode -- only call scaffoldAgentOnboardingDocs() from scaffoldClientFiles() when NOT in full mode, since scaffoldFullDocs() already handles it.'
acceptance:
  - Files appear in exactly one output section (Created OR Skipped, never both)
  - Running lumenflow init --client claude on an empty dir shows no duplicates
  - Running lumenflow init --client claude with pre-existing docs shows files only in Skipped
  - Non-full mode (--minimal) still scaffolds onboarding docs for claude client
