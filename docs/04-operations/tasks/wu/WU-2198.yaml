id: WU-2198
title: 'BUG: committed dist symlinks break fresh clone build'
lane: 'Operations: Tooling'
type: bug
status: done
priority: P2
created: 2026-02-26
code_paths:
  - .gitignore
  - packages/@lumenflow/cli/dist
  - packages/@lumenflow/core/dist
  - packages/@lumenflow/mcp/dist
  - packages/@lumenflow/shims/dist
tests:
  manual:
    - '(auto) Manual check: verify acceptance criteria; add automated tests before changing code
      files.'
  unit: []
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2198.done
dependencies: []
risks: []
notes: >-
  (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.


  [ADMIN-REPAIR 2026-02-26]: status changed from 'done' to 'in_progress'; locked changed from true
  to false
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Four packages (@lumenflow/cli, core, mcp, shims) have their dist/ directories committed
  to git as broken symlinks pointing to ../../../../../packages/@lumenflow/<pkg>/dist. The root
  .gitignore uses dist/ (trailing slash, matches directories only) so symlinks bypass the ignore
  rule. Every fresh clone fails to build with TS5033 ENOENT errors because TypeScript cannot write
  to dist/. This has recurred twice before (WU-2047, WU-2036) without fixing the underlying
  .gitignore pattern.
acceptance:
  - '[ ] git rm --cached removes the four broken dist symlinks from tracking'
  - '[ ] .gitignore updated from dist/ to dist so symlinks are ignored going forward'
  - '[ ] pnpm run setup succeeds on a fresh clone (verified via git stash + reinstall simulation)'
  - '[ ] No dist symlinks appear in git status after build'
locked: true
completed_at: 2026-02-26T13:09:45.878Z
completed: 2026-02-26
