id: WU-1669
title: 'Fix pre-existing test failures: cli-flag-verification snapshots and MCP timeout'
lane: 'Framework: Core Validation'
type: bug
status: superseded
priority: P2
created: 2026-02-13
code_paths:
  - packages/@lumenflow/core/src/schemas/__tests__/cli-flag-verification.test.ts
tests:
  manual:
    - Run gates and verify all test suites pass
  unit:
    - packages/@lumenflow/core/src/schemas/__tests__/cli-flag-verification.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1669.done
dependencies: []
risks: []
notes: >-
  (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.


  Superseded by subsequent completed work (including WU-1676) that reconciled CLI flag parity;
  current main passes cli-flag-verification and MCP cli-integration without timeout on 2026-02-14.


  [ADMIN-REPAIR 2026-02-14]: status changed from 'ready' to 'superseded'
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: Several pre-existing test failures exist on main. Problem:
  cli-flag-verification.test.ts has 3 snapshot drift failures (wu:claim, wu:brief, initiative:edit
  field counts changed) and MCP cli-integration.test.ts has flaky 5000ms timeouts. Solution: Update
  EXPECTED_FIELD_COUNTS snapshot and increase MCP test timeout.'
acceptance:
  - All cli-flag-verification snapshot tests pass
  - MCP cli-integration tests pass without timeout
