id: WU-2260
title: 'INIT-047 review follow-ups: silent catch, loose type, redundant error'
lane: 'Framework: CLI WU Commands'
type: bug
status: in_progress
priority: P3
created: 2026-02-27
code_paths:
  - packages/@lumenflow/cli/src/wu-recover.ts
  - packages/@lumenflow/cli/src/state-emit.ts
tests:
  manual:
    - Verify wu:recover --action reset without --force shows single warning message
    - not duplicate
  unit:
    - packages/@lumenflow/cli/__tests__/init-047-review-followups.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2260.done
dependencies: []
initiative: INIT-047
risks: []
notes: 'Three minor fixes from INIT-047 code review: (1) warn on git status failure in dirty check,
  (2) tighten ValidEmitType, (3) deduplicate error output for --force check.'
requires_review: false
claimed_mode: worktree
assigned_to: tom@hellm.ai
claimed_at: 2026-02-27T16:32:19.396Z
worktree_path: worktrees/framework-cli-wu-commands-wu-2260
session_id: 87394ffd-3b29-43a4-bb04-21c769b571ac
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-27T16:32:19.401Z
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Code review of INIT-047 found three minor issues: (1) WU-2249
  checkWorktreeForDirtyFiles swallows all errors silently, risking data loss if git status fails for
  non-trivial reasons. (2) WU-2241 emitCorrectiveEvent accepts ValidEmitType|string, weakening
  compile-time safety. (3) WU-2238 prints redundant error: detailed warning then die() message.'
acceptance:
  - checkWorktreeForDirtyFiles catch block logs a warning before returning empty array
  - emitCorrectiveEvent type parameter uses ValidEmitType only, string accepted only at CLI parse
    layer
  - wu:recover reset prints either the detailed warning or the die message, not both
