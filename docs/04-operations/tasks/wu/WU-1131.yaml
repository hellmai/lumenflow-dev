id: WU-1131
title: Fix wu:spawn output truncation causing agent degradation
lane: 'Framework: CLI'
type: bug
status: ready
priority: P1
created: 2026-01-26
code_paths:
  - .claude/skills/orchestration/SKILL.md
  - packages/@lumenflow/cli/src/wu-spawn.ts
tests:
  manual:
    - pnpm wu:spawn --id WU-XXX | head -20 shows warning banner
    - pnpm wu:spawn --id WU-XXX | tail -5 shows LUMENFLOW_SPAWN_END sentinel
    - pnpm wu:spawn --id WU-XXX | grep -c Constraints Block returns 1
  unit:
    - packages/@lumenflow/cli/src/__tests__/wu-spawn.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1131.done
dependencies: []
initiative: INIT-005
phase: 1
risks: []
notes: ''
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Add warning banner and end sentinel to wu:spawn output to prevent truncation. Update
  orchestration skill to require verbatim output verification.
acceptance:
  - Warning banner added at start of wu:spawn output
  - End sentinel <!-- LUMENFLOW_SPAWN_END --> added after constraints block
  - Orchestration skill updated with verbatim output + verification requirements
  - Truncation detection tests pass
