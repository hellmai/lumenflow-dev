id: WU-1131
title: Fix wu:spawn output truncation causing agent degradation
lane: 'Framework: CLI'
type: bug
status: done
priority: P1
created: 2026-01-26
code_paths:
  - .claude/skills/orchestration/SKILL.md
  - packages/@lumenflow/cli/src/wu-spawn.ts
tests:
  manual:
    - pnpm wu:spawn --id WU-XXX | head -20 shows warning banner
    - pnpm wu:spawn --id WU-XXX | tail -5 shows LUMENFLOW_SPAWN_END sentinel
    - pnpm wu:spawn --id WU-XXX | grep -c Constraints Block returns 1
  unit:
    - packages/@lumenflow/cli/__tests__/wu-spawn.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1131.done
dependencies: []
initiative: INIT-005
phase: 1
risks: []
notes: Completed per acceptance criteria.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Add warning banner and end sentinel to wu:spawn output to prevent truncation. Update
  orchestration skill to require verbatim output verification.
acceptance:
  - Warning banner added at start of wu:spawn output
  - End sentinel <!-- LUMENFLOW_SPAWN_END --> added after constraints block
  - Orchestration skill updated with verbatim output + verification requirements
  - Truncation detection tests pass
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-wu-1131
claimed_at: 2026-01-26T23:34:29.672Z
baseline_main_sha: c8ac5eb243a28d75df4d7a4ad797be7c798f99e4
session_id: 8c16a1bc-e9c7-4814-837d-be4f38b746da
approved_by:
  - tom@hellm.ai
approved_at: 2026-01-26T23:34:29.681Z
locked: true
completed_at: 2026-01-27T00:03:19.408Z
