id: WU-1112
title: 'INIT-003 Phase 6: Migrate remaining Tier 1 tools'
lane: 'Framework: CLI'
type: feature
status: ready
priority: P3
created: 2026-01-25
code_paths:
  - packages/@lumenflow/cli/src/**
tests:
  manual: []
  unit:
    - packages/@lumenflow/cli/src/__tests__/**
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1112.done
dependencies: []
initiative: INIT-003
phase: 6
blocked_by:
  - WU-1101
  - WU-1104
spec_refs:
  - lumenflow://plans/unified-rolling-music.md
risks:
  - 'lumenflow:upgrade workflow gap: updates package.json on main but pnpm install blocked by worktree discipline'
notes: |
  KNOWN ISSUE: lumenflow:upgrade modifies package.json on main via micro-worktree,
  but subsequent pnpm install is blocked by worktree hooks.

  Options to address:
  A) Add LUMENFLOW_UPGRADE=1 env var that whitelists pnpm install during upgrade
  B) Run install inside the micro-worktree before merge
  C) Document as two-phase: upgrade commits, user runs install with LUMENFLOW_FORCE

  Recommended: Option A - detect upgrade context and whitelist install.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Migrate deps-add, deps-remove, session-coordinator, rotate-progress, lumenflow-upgrade, trace-gen from ExampleApp. These are the remaining generic tools. Some have existing tests.
acceptance:
  - deps-add.ts and deps-remove.ts exist with tests
  - session-coordinator.ts exists
  - rotate-progress.ts exists
  - lumenflow-upgrade.ts exists with tests
  - lumenflow-upgrade handles pnpm install workflow (no blocked-on-main issue)
  - trace-gen.ts exists
  - All bin entries added
  - '>80% coverage on migrated code'
