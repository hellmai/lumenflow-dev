id: WU-1329
title: Make WU validation strict by default
lane: 'Framework: CLI'
type: feature
status: in_progress
priority: P1
created: 2026-02-02
code_paths:
  - packages/@lumenflow/cli/src/wu-create.ts
  - packages/@lumenflow/cli/src/wu-edit.ts
  - packages/@lumenflow/cli/src/wu-validate.ts
  - packages/@lumenflow/core/src/wu-preflight-validators.ts
tests:
  manual:
    - 'Run pnpm wu:create with non-existent code_paths and verify it fails with clear error message'
    - 'Run pnpm wu:create --no-strict with non-existent code_paths and verify it passes with warning'
    - 'Run pnpm wu:edit with non-existent code_paths and verify it fails with clear error message'
    - 'Run pnpm wu:edit --no-strict with non-existent code_paths and verify it passes with warning'
    - 'Run pnpm wu:validate and verify warnings are treated as errors by default'
    - 'Run pnpm wu:validate --no-strict and verify warnings are advisory only'
  unit:
    - packages/@lumenflow/cli/src/__tests__/wu-create-strict.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-edit-strict.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-validate-strict.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1329.done
dependencies: []
spec_refs:
  - lumenflow://plans/WU-1329-plan.md
risks: []
notes: |
  Implementation adds strict validation to wu:create, wu:edit, and wu:validate commands.
  Strict mode validates that code_paths and test_paths files exist on disk.
  The --no-strict flag bypasses strict validation (logged when used).
  This prevents WU specs from referencing non-existent files, improving spec quality.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Make wu:create, wu:edit, and wu:validate run strict validation by default. Add explicit
  --no-strict opt-out (logged). Strict should validate code_paths/test_paths existence and treat
  warnings as errors.
acceptance:
  - wu:create runs strict validation by default
  - wu:edit runs strict validation by default
  - wu:validate treats warnings as errors by default
  - --no-strict bypasses strict mode and logs opt-out
  - Help text documents strict default and opt-out
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-wu-1329
claimed_at: 2026-02-02T10:26:08.575Z
baseline_main_sha: 95ca7495c3722e0b08834a2714e4514d63e20839
session_id: ed86ec10-e930-470a-b394-3673368d5193
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-02T10:26:08.578Z
