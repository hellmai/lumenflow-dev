id: WU-1955
title: '[WU-L] AG-UI run route + preview runtime diagnostics'
lane: 'Operations: Runtime'
type: feature
status: done
priority: P1
created: 2026-02-20
code_paths:
  - apps/web/app/api
  - apps/web/src/server/http-surface-runtime.ts
tests:
  manual:
    - In preview mode verify actionable runtime error; in runtime mode verify run route streams
      events
  unit:
    - apps/web/__tests__/api-routes.test.ts
    - apps/web/__tests__/http-surface-runtime-health.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1955.done
dependencies: []
initiative: INIT-032
phase: 4
blocked_by:
  - WU-1945
spec_refs:
  - /home/USER/.claude/plans/curious-skipping-robin.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: api
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Mount the AG-UI run route in web app and upgrade preview/runtime error diagnostics with
  actionable environment setup guidance and health endpoint visibility.
acceptance:
  - POST /api/ag-ui/v1/run is exposed in web app and forwards SSE correctly when runtime is enabled
  - Preview-mode kernel-unavailable errors include exact env vars and setup guidance
  - Health endpoint reports kernel/runtime availability state for fast diagnostics
claimed_mode: worktree
worktree_path: /home/USER/source/hellmai/os/worktrees/operations-runtime-wu-1955
claimed_at: 2026-02-20T21:53:28.486Z
baseline_main_sha: 530a1956d143a7c4cc9cb087c6e4876c8dc97d84
session_id: f67e4026-76fe-49d5-bbb8-8f67bc0b5f50
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-20T21:53:28.492Z
locked: true
completed_at: 2026-02-20T22:02:36.730Z
completed: 2026-02-20
