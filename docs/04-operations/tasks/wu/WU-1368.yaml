id: WU-1368
title: Fix sync:templates --check-drift and add micro-worktree isolation
lane: 'Framework: CLI'
type: feature
status: ready
priority: P2
created: 2026-02-03
code_paths:
  - packages/@lumenflow/cli/src/sync-templates.ts
tests:
  manual: []
  unit:
    - packages/@lumenflow/cli/src/__tests__/sync-templates.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1368.done
dependencies: []
risks: []
notes: ''
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Two bugs: (1) --check-drift flag syncs files instead of only checking - should be read-only. (2) sync:templates writes directly to main checkout - should use micro-worktree isolation like wu:create for safe atomic commits.'
acceptance:
  - '--check-drift flag is read-only: compares templates without writing'
  - --check-drift exits 1 if drift detected, exits 0 if in sync
  - sync:templates (without --check-drift) uses micro-worktree isolation
  - Atomic commit created via micro-worktree pattern
  - Unit tests verify --check-drift does not modify filesystem
