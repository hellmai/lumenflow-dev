id: WU-1511
title: Fix wu:delete to fully clean projections and initiative links
lane: 'Framework: CLI WU Commands'
type: bug
status: ready
priority: P1
created: 2026-02-07
code_paths:
  - packages/@lumenflow/cli/src/wu-delete.ts
  - packages/@lumenflow/cli/src/initiative-remove-wu.ts
  - packages/@lumenflow/cli/src/__tests__/
tests:
  manual: []
  unit:
    - packages/@lumenflow/cli/src/__tests__/initiative-remove-wu.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1511.done
dependencies: []
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: deleting WU-1007 removed the WU file but left stale references in status and initiative linkage. Problem: wu:delete can leave task projections inconsistent (dangling references to non-existent WU), which breaks trust in state views. Solution: harden wu:delete to atomically remove all references (WU file, backlog/status projections, initiative links) and validate no stale WU links remain after delete.'
acceptance:
  - Deleting a WU removes references from status/backlog projections and initiative linkage in one transaction
  - After wu:delete, no references to the deleted WU remain in docs/04-operations/tasks/{status,backlog}.md or linked initiatives
  - Add regression tests that fail before fix and pass after fix
