id: WU-1734
title: Software delivery pack — Git tools + worktree + lane locks + delegation
lane: 'Framework: Core State Recovery'
type: feature
status: ready
priority: P1
created: 2026-02-16
code_paths:
  - packages/@lumenflow/packs/software-delivery/tools/
tests:
  manual:
    - pnpm typecheck passes
  unit:
    - packages/@lumenflow/packs/software-delivery/__tests__/git-tools.test.ts
    - packages/@lumenflow/packs/software-delivery/__tests__/lane-lock.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1734.done
dependencies: []
initiative: INIT-029
phase: 3
blocked_by:
  - WU-1732
  - WU-1733
labels:
  - packs
  - phase-3
  - software-delivery
  - git
spec_refs:
  - .claude/plans/golden-prancing-cookie.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: INIT-029 Phase 3 — Policies + Packs. Depends on WU-1732 (PolicyEngine) and WU-1733 (SW delivery extensions). Problem: Current git/worktree/delegation tools are spread across core as standalone modules. They need to become ToolCapability implementations registered through the pack system. Solution: Git tools (commit, push, merge, branch, worktree) as ToolCapability implementations. Lane lock tool ported from lane-lock.ts. Delegation tools ported from delegation-registry-store.ts pattern. Worktree lifecycle tools ported from worktree-*.ts. All tools produce receipts through ToolHost. Reference: git-adapter.ts, lane-lock.ts, delegation-registry-store.ts, worktree-*.ts. Plan: .claude/plans/golden-prancing-cookie.md'
acceptance:
  - Git tools (git:commit, git:push, git:merge, git:branch, git:worktree) as ToolCapability implementations
  - All git tools produce receipts when executed through ToolHost
  - Lane lock tool ported from lane-lock.ts with atomic acquire/release
  - Delegation tools ported from delegation-registry-store.ts with lineage tracking
  - Worktree lifecycle tools (create, remove, list) ported from worktree-*.ts
  - git:commit tool execution produces receipt with artifacts_written field
  - Lane lock acquires and releases correctly with staleness detection
