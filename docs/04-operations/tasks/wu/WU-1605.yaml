id: WU-1605
title: Add claim-time pickup evidence and enforce intent-vs-pickup provenance at wu:done
lane: 'Framework: CLI WU Commands'
type: feature
status: in_progress
priority: P1
created: 2026-02-12
code_paths:
  - packages/@lumenflow/cli/src/wu-claim.ts
  - packages/@lumenflow/cli/src/wu-done.ts
  - packages/@lumenflow/core/src/spawn-registry-schema.ts
  - packages/@lumenflow/core/src/spawn-registry-store.ts
  - packages/@lumenflow/cli/src/__tests__/agent-spawn-coordination.test.ts
  - packages/@lumenflow/cli/src/__tests__/wu-claim.test.ts
tests:
  manual:
    - Execute delegated claim and completion scenarios and confirm policy outcomes for intent-only,
      pickup-confirmed, and override paths.
  unit:
    - packages/@lumenflow/cli/__tests__/wu-claim.test.ts
    - packages/@lumenflow/cli/__tests__/wu-done.test.ts
    - packages/@lumenflow/cli/src/__tests__/agent-spawn-coordination.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1605.done
dependencies: []
initiative: INIT-024
phase: 3
blocked_by:
  - WU-1604
spec_refs:
  - lumenflow://plans/WU-1605-plan.md
risks: []
notes: This WU closes the semantic gap between generated/recorded delegation intent and actual
  execution pickup.
requires_review: false
claimed_mode: worktree
assigned_to: tom@hellm.ai
claimed_at: 2026-02-12T19:55:14.979Z
worktree_path: /home/USER/source/hellmai/os/worktrees/framework-cli-wu-commands-wu-1605
session_id: d68d5a67-9f41-4dc7-b60e-0f851a88f2fb
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-12T19:55:14.987Z
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Current provenance can only prove delegation intent, not that an agent actually picked
  up delegated work. Add a claim-time handshake (e.g. delegated-by metadata) and evolve wu:done
  checks so completion policy can validate both intent and pickup evidence with auditable override
  behavior.
acceptance:
  - wu:claim supports recording delegated pickup metadata tied to prior delegation intent.
  - wu:done enforcement distinguishes intent-only records from confirmed pickup and reports
    actionable remediation.
  - Automated tests cover success, missing-pickup, and audited override paths for
    initiative-governed WUs.
