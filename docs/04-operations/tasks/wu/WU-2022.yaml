id: WU-2022
title: 'Close workspace-first hard cut: move remaining legacy config readers'
lane: 'Framework: Core Lifecycle'
type: bug
status: ready
priority: P1
created: 2026-02-22
code_paths:
  - packages/@lumenflow/cli/src/lane-setup.ts
  - packages/@lumenflow/cli/src/lane-lock.ts
  - packages/@lumenflow/cli/src/lane-validate.ts
  - packages/@lumenflow/cli/src/lane-edit.ts
  - packages/@lumenflow/cli/src/lane-health.ts
  - packages/@lumenflow/core/src/lane-checker.ts
  - packages/@lumenflow/cli/src/object-guards.ts
  - packages/@lumenflow/core/src/object-guards.ts
tests:
  manual:
    - Run pnpm lane:setup, pnpm lane:validate, and pnpm lane:lock in a repo with no .lumenflow.config.yaml and verify success paths reference workspace.yaml.
    - Run pnpm wu:create and pnpm wu:claim on this WU and verify no legacy config missing errors.
  unit:
    - packages/@lumenflow/core/src/__tests__/lane-checker.test.ts
    - packages/@lumenflow/cli/src/__tests__/lane-edit.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-sandbox.test.ts
    - packages/@lumenflow/cli/src/__tests__/commands/integrate.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2022.done
dependencies: []
risks: []
notes: Continuation closeout after WU-2006/INIT-033 drift audit.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: legacy .lumenflow.config.yaml readers still block true workspace-first runtime behavior and even lifecycle tooling. Problem: commands and helpers still read legacy paths directly, causing drift and breakage when the legacy file is removed. Solution: finish workspace-first cut by migrating remaining runtime readers to workspace.yaml software_delivery, remove hardcoded legacy config path checks/messages, and validate claim/lane lifecycle flow works without legacy file.'
acceptance:
  - No runtime command path requires .lumenflow.config.yaml reads
  - lane:setup, lane:validate, lane:lock, lane:edit, and lane-checker resolve lanes from workspace.yaml software_delivery
  - wu:create and wu:claim flow works without legacy config file present
  - Changed modules use shared helpers/constants (no duplicated object-shape literals)
