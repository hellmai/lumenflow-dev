id: WU-1462
title: Unblock MCP packaging and prevent CLI test artifacts in publish tarballs
lane: 'Framework: CLI'
type: bug
status: in_progress
priority: P0
created: 2026-02-05
code_paths:
  - packages/@lumenflow/mcp/package.json
  - packages/@lumenflow/mcp/tsconfig.json
  - packages/@lumenflow/cli/package.json
  - packages/@lumenflow/cli/tsconfig.json
tests:
  manual:
    - Run pnpm pack:all and inspect CLI tarball contents for absence of test files
  unit: []
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1462.done
dependencies: []
initiative: INIT-014
phase: 2
spec_refs:
  - docs/04-operations/plans/INIT-014-rollout-1-launch-readiness-har.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: pack:all fails because @lumenflow/mcp build:dist references a missing
  tsconfig.build.json, and @lumenflow/cli tarballs currently include compiled test artifacts.
  Problem: release packaging is not trustworthy and blocks publish readiness. Solution: provide a
  valid MCP build tsconfig path and tighten CLI build/package excludes so test files are not
  published.'
acceptance:
  - pnpm pack:all succeeds without MCP build path errors
  - '@lumenflow/mcp build:dist uses an existing tsconfig file'
  - '@lumenflow/cli package tarball excludes dist test artifacts'
  - Packaging behavior is covered by repeatable verification steps in tests or docs
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-wu-1462
claimed_at: 2026-02-05T23:50:59.335Z
baseline_main_sha: f1f995c800f626b5c4ec4ac9d84fb24b9f5e72fe
session_id: 6b4f8efa-c6e8-42d7-8fc4-5f651cf35703
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-05T23:50:59.343Z
