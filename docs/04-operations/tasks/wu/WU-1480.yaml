id: WU-1480
title: Add dependency-closure bootstrap for dist-backed CLI commands
lane: 'Operations: Tooling'
type: tooling
status: in_progress
priority: P2
created: 2026-02-06
code_paths:
  - package.json
  - docs/04-operations/_frameworks/lumenflow/agent/onboarding/quick-ref-commands.md
  - docs/04-operations/_frameworks/lumenflow/lumenflow-complete.md
  - docs/04-operations/_frameworks/lumenflow/agent/onboarding/starting-prompt.md
  - package.json
  - docs/04-operations/_frameworks/lumenflow/agent/onboarding/quick-ref-commands.md
  - docs/04-operations/_frameworks/lumenflow/lumenflow-complete.md
  - docs/04-operations/_frameworks/lumenflow/agent/onboarding/starting-prompt.md
  - scripts/hooks/check-lockfile.sh
  - CLAUDE.md
tests:
  manual:
    - From a fresh worktree, run the bootstrap command then pnpm lane:health and verify success.
    - Confirm docs include the dependency-closure build rationale and exact command.
  unit: []
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1480.done
dependencies: []
spec_refs:
  - lumenflow://plans/WU-1480-plan.md
risks: []
notes: Created after WU-1478 to reduce worktree friction for dist-backed CLI commands; targets
  one-command dependency-closure bootstrap + docs update.
requires_review: false
claimed_mode: worktree
assigned_to: tom@hellm.ai
claimed_at: 2026-02-06T12:01:54.091Z
worktree_path: /home/tom/source/hellmai/os/worktrees/operations-tooling-wu-1480
session_id: 2b52b8e3-b872-4289-8dec-d3f991740113
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-06T12:01:54.098Z
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: dist-backed CLI commands like lane:health fail in fresh worktrees when only
  @lumenflow/cli is built. Problem: agents hit missing dist dependencies and lose flow. Solution:
  add a one-command bootstrap path that builds @lumenflow/cli with dependency closure and document
  it as the standard preflight for dist-backed commands.'
acceptance:
  - Root script exists to build @lumenflow/cli plus dependency closure in one command.
  - On a fresh worktree, running bootstrap then lane:health succeeds without manual
    package-by-package builds.
  - Internal docs describe the pattern, rationale, and recommended command sequence for agents.
