id: WU-1731
title: Kernel built-in tools (fs:read, fs:write, proc:exec) + ESLint boundary rules
lane: 'Framework: Core Lifecycle'
type: feature
status: ready
priority: P1
created: 2026-02-16
code_paths:
  - packages/@lumenflow/kernel/src/tool-host/builtins/
tests:
  manual:
    - pnpm lint passes with boundary rules active
    - pnpm typecheck passes for kernel package
  unit:
    - packages/@lumenflow/kernel/src/__tests__/builtin-tools.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1731.done
dependencies: []
initiative: INIT-029
phase: 2
blocked_by:
  - WU-1729
  - WU-1730
labels:
  - kernel
  - phase-2
  - tools
  - boundary-enforcement
spec_refs:
  - .claude/plans/golden-prancing-cookie.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: INIT-029 Phase 2 — ToolHost + Evidence. Depends on WU-1729 (ToolHost) and WU-1730 (Sandbox). Problem: The kernel needs minimal built-in tools (syscalls) to prove the execution model, plus ESLint rules to enforce the ToolHost boundary. Solution: Implement 3 built-in kernel tools: fs:read (in-process, read permission), fs:write (subprocess, write permission, scoped to declared artifacts), proc:exec (subprocess, write permission, sandbox enforced). Add ESLint no-restricted-imports rules that block fs/fs-promises/child_process/net imports outside kernel/tool-host and kernel/sandbox. This turns the ToolHost boundary from convention into compilation error. Reference: eslint-plugin-boundaries (already installed). Plan: .claude/plans/golden-prancing-cookie.md'
acceptance:
  - fs:read tool implemented as in-process ToolCapability with read permission
  - fs:write tool implemented as subprocess ToolCapability, scoped to declared task artifacts
  - proc:exec tool implemented as subprocess ToolCapability with sandbox enforcement
  - All 3 tools register in ToolRegistry and execute through ToolHost producing receipts
  - ESLint no-restricted-imports blocks fs/child_process imports outside kernel/tool-host and kernel/sandbox
  - ESLint override allows fs/child_process in tool-host and sandbox directories
  - Packs importing fs directly get a lint error — boundary is enforced at build time
