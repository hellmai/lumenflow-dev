id: WU-1032
title: Upgrade Core Dependencies and Fix Documentation
lane: 'Operations: Infrastructure'
type: chore
status: done
priority: P1
exposure: documentation
created: 2026-01-20
code_paths:
  - package.json
  - packages/@lumenflow/cli/package.json
  - packages/@lumenflow/core/package.json
  - packages/@lumenflow/agent/package.json
  - packages/@lumenflow/memory/package.json
  - packages/@lumenflow/metrics/package.json
  - packages/@lumenflow/initiatives/package.json
  - packages/@lumenflow/shims/package.json
  - apps/github-app/package.json
  - docs/05-business/lumenflow-saas/06-agent-starting-prompt.md
  - docs/05-business/lumenflow-saas/05-mvp-work-units.md
  - docs/02-technical/architecture/tech-stack-lumenflow-saas-reference.md
  - docs/05-business/lumenflow-saas/README.md
  - docs/01-product/lumenflow-saas/vision.md
  - docs/04-operations/_frameworks/lumenflow/lumenflow-complete.md
tests:
  manual:
    - Verify pnpm install works with new version
    - Verify build succeeds with upgraded Turborepo
    - Verify gates pass with unified Vitest
  unit: []
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1032.done
dependencies: []
risks:
  - Major pnpm upgrade (v9 -> v10) may have breaking changes in lifecycle scripts
notes: High priority security and stability upgrades
requires_review: false
assigned_to: tom@hellm.ai
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: >
  Context: The project inventory revealed outdated versions of critical tools (pnpm, Turborepo,
  Vitest) and inconsistent dependency versions across packages. Documentation previously referenced
  an older Next.js version. Problem: pnpm, Turborepo, and Vitest need consistent upgrades, and docs
  must not reference Next.js 15. Solution: upgrade pnpm/turbo/vitest and normalize
  simple-git/fast-glob versions, then verify docs reference Next.js 16 only.


  Problem:

  - pnpm 9.15.0 misses security/perf improvements in v10

  - Vitest versions are fragmented (4.0.17, 2.1.0, 1.0.0)

  - Simple-git and Fast-glob versions are inconsistent

  - Documentation misleads agents about the Next.js version (15 vs 16)


  Solution:

  1. Upgrade pnpm to 10.28.1

  2. Unify Vitest to 4.0.0 across all packages

  3. Upgrade Turborepo to 2.7.5

  4. Unify Simple-git (3.30.0) and Fast-glob (3.3.3)

  5. Update all docs references from "Next.js 15" to "Next.js 16"
acceptance:
  - pnpm version is 10.28.1 in package.json (engines/packageManager)
  - Turborepo version is 2.7.5
  - Vitest version is ^4.0.0 in all package.json files
  - Simple-git version is ^3.30.0 in all package.json files
  - Fast-glob version is ^3.3.3 in all package.json files
  - No references to "Next.js 15" remain in docs/** (rg check)
  - pnpm install, build, and test commands succeed
claimed_mode: worktree
worktree_path: worktrees/operations-infrastructure-wu-1032
claimed_at: 2026-01-20T13:03:31.703Z
baseline_main_sha: c90fa6788b801f6a5c9fcaed6ef589ec0ca1803a
session_id: 38dbc6c3-6b3e-443c-b73f-fb9e627e3a4e
approved_by:
  - tom@hellm.ai
approved_at: 2026-01-20T13:03:31.711Z
locked: true
completed_at: 2026-01-20T23:51:26.295Z
