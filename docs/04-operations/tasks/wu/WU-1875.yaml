id: WU-1875
title: pack:install --source registry HTTP fetch path
lane: 'Framework: CLI Orchestration'
type: feature
status: in_progress
priority: P1
created: 2026-02-18
code_paths:
  - packages/@lumenflow/cli/src/pack-install.ts
tests:
  manual:
    - Verify pack:install --source registry downloads and extracts a published pack
  unit:
    - packages/@lumenflow/cli/src/__tests__/pack-install-registry.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1875.done
dependencies: []
initiative: INIT-031
phase: 6
blocked_by:
  - WU-1869
spec_refs:
  - .claude/plans/partitioned-sprouting-nest.md
risks: []
notes: 'Sizing: Simple (S). ~5-10 files, ~30 tool calls. Strategy: Single Session. Wave 6a (parallel
  with 6.3). Adds HTTP fetch branch to existing pack-install.ts (339 lines). FetchFn port pattern
  keeps tests fast.'
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: pack-install.ts supports registry as a pin format but does not fetch from the
  registry URL. Problem: Users cannot install packs from the Vercel Blob registry â€” the HTTP fetch
  path is stubbed. Solution: Implement registry source in pack-install.ts that fetches tarball from
  /api/registry/packs/:id/versions/:version/tarball (added in WU-1869). Verify SHA-256 integrity
  before extracting. Inject FetchFn port for testability.'
acceptance:
  - pack:install --source registry fetches tarball from registry API endpoint
  - SHA-256 integrity verification before tarball extraction
  - FetchFn port injected for testability (no real HTTP calls in tests)
  - Meaningful error messages for network failures, integrity mismatches, and 404s
  - 'Backward compatible: local and git sources continue to work'
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-orchestration-wu-1875
claimed_at: 2026-02-18T23:40:40.107Z
baseline_main_sha: 27fcd896d1e97dca7b10dac1a1aeb9659b64a494
session_id: 566d1364-bedf-4178-8dcb-7935bb9ab791
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-18T23:40:40.114Z
