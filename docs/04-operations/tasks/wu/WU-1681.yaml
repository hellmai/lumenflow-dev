id: WU-1681
title: Fix wu:brief client flag UX to avoid Claude-biased defaults
lane: 'Framework: CLI WU Commands'
type: bug
status: in_progress
priority: P1
created: 2026-02-15
code_paths:
  - packages/@lumenflow/core/src/arg-parser.ts
  - packages/@lumenflow/cli/src/wu-spawn-strategy-resolver.ts
  - packages/@lumenflow/core/src/spawn-strategy.ts
  - LUMENFLOW.md
  - docs/04-operations/_frameworks/lumenflow/wu-sizing-guide.md
  - packages/@lumenflow/cli/__tests__/wu-spawn.test.ts
  - packages/@lumenflow/core/src/__tests__/arg-parser.test.ts
tests:
  manual:
    - Run 'pnpm wu:brief --help' and verify client examples are neutral and include codex-cli.
    - Run 'pnpm wu:brief --id <WU-ID> --client codex-cli --codex' and verify
      deprecation/normalization messaging is clear and non-blocking.
  unit:
    - packages/@lumenflow/cli/__tests__/wu-spawn.test.ts
    - packages/@lumenflow/core/src/__tests__/arg-parser.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1681.done
dependencies: []
spec_refs:
  - LUMENFLOW.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: wu:brief usage in a Codex session still nudges claude-code via help
  text/defaults/examples. Problem: operators can unintentionally use wrong client flag because
  guidance is ambiguous and Claude-centric. Solution: make wu:brief client guidance explicit and
  neutral, prefer codex-compatible examples where relevant, and reduce ambiguity between
  codex/codex-cli/deprecated --codex.'
acceptance:
  - wu:brief --help explicitly lists codex-cli as a supported client example alongside other clients.
  - When running in a Codex-context workflow, generated guidance and docs no longer default to
    claude-code examples for wu:brief/wu:delegate.
  - Deprecated --codex path remains backward compatible but messaging clearly points to canonical
    --client value(s).
  - Docs and tests are updated to prevent regression in client-name guidance.
claimed_mode: worktree
worktree_path: /home/USER/source/hellmai/os/worktrees/framework-cli-wu-commands-wu-1681
claimed_at: 2026-02-15T10:13:50.851Z
baseline_main_sha: a14186e7bbed7baf3825b0e08a15942204487185
session_id: 5fa86655-0561-4e7d-8628-dace82f7fa35
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-15T10:13:50.854Z
