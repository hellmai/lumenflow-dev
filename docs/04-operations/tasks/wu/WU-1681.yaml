id: WU-1681
title: Fix wu:brief client flag UX to avoid Claude-biased defaults
lane: 'Framework: CLI WU Commands'
type: bug
status: done
priority: P1
created: 2026-02-15
code_paths:
  - packages/@lumenflow/core/src/wu-context-constants.ts
  - packages/@lumenflow/core/src/arg-parser.ts
  - packages/@lumenflow/core/src/spawn-strategy.ts
  - packages/@lumenflow/core/src/schemas/setup-schemas.ts
  - packages/@lumenflow/core/src/schemas/wu-lifecycle-schemas.ts
  - packages/@lumenflow/core/src/lumenflow-config-schema.ts
  - packages/@lumenflow/core/src/wu-schema.ts
  - packages/@lumenflow/cli/src/wu-spawn-strategy-resolver.ts
  - packages/@lumenflow/cli/src/wu-spawn-prompt-builders.ts
  - packages/@lumenflow/cli/src/agent-session.ts
  - packages/@lumenflow/cli/src/orchestrate-initiative.ts
  - packages/@lumenflow/cli/src/hooks/enforcement-sync.ts
  - packages/@lumenflow/cli/src/hooks/generators/pre-compact-checkpoint.ts
  - packages/@lumenflow/cli/src/hooks/generators/session-start-recovery.ts
  - packages/@lumenflow/cli/__tests__/wu-spawn.test.ts
  - packages/@lumenflow/core/src/__tests__/arg-parser.test.ts
  - LUMENFLOW.md
  - docs/04-operations/_frameworks/lumenflow/wu-sizing-guide.md
  - docs/04-operations/_frameworks/lumenflow/agent/onboarding/agent-invocation-guide.md
  - apps/docs/src/content/docs/reference/config.mdx
  - apps/docs/src/content/docs/reference/cli.mdx
  - apps/docs/src/content/docs/reference/templates.mdx
  - apps/docs/src/content/docs/reference/mcp.mdx
  - apps/docs/src/content/docs/reference/api.mdx
tests:
  manual:
    - Run 'pnpm wu:brief --help' and verify client examples are neutral and include codex-cli.
    - Run 'pnpm wu:brief --id <WU-ID> --client codex-cli --codex' and verify
      deprecation/normalization messaging is clear and non-blocking.
  unit:
    - packages/@lumenflow/cli/__tests__/wu-spawn.test.ts
    - packages/@lumenflow/core/src/__tests__/arg-parser.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1681.done
dependencies: []
spec_refs:
  - LUMENFLOW.md
  - .claude/plans/mighty-painting-castle.md
risks: []
notes: >-
  (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.


  Shallow multi-file override (wu-sizing-guide s1.2): ~25 files, uniform string replacements <=5
  lines each. No structural changes. Expands LUMENFLOW_CLIENT_IDS as single source of truth,
  neutralizes all help text/docs/fallbacks/hooks/Starlight refs.
requires_review: false
claimed_mode: worktree
assigned_to: tom@hellm.ai
claimed_at: 2026-02-15T10:13:50.851Z
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-wu-commands-wu-1681
session_id: 5fa86655-0561-4e7d-8628-dace82f7fa35
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-15T10:13:50.854Z
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: wu:brief usage in a Codex session still nudges claude-code via help
  text/defaults/examples. Problem: operators can unintentionally use wrong client flag because
  guidance is ambiguous and Claude-centric. Solution: make wu:brief client guidance explicit and
  neutral, prefer codex-compatible examples where relevant, and reduce ambiguity between
  codex/codex-cli/deprecated --codex.'
acceptance:
  - wu:brief --help explicitly lists codex-cli as a supported client example alongside other clients.
  - When running in a Codex-context workflow, generated guidance and docs no longer default to
    claude-code examples for wu:brief/wu:delegate.
  - Deprecated --codex path remains backward compatible but messaging clearly points to canonical
    --client value(s).
  - Docs and tests are updated to prevent regression in client-name guidance.
locked: true
completed_at: 2026-02-15T11:05:48.469Z
completed: 2026-02-15
