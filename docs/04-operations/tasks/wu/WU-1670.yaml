id: WU-1670
title: Fix flaky test timeouts in gates-graceful-degradation and wu-prep-default-exec tests
lane: 'Framework: CLI Enforcement'
type: bug
status: superseded
priority: P2
created: 2026-02-13
code_paths:
  - packages/@lumenflow/cli/src/__tests__/gates-graceful-degradation.test.ts
  - packages/@lumenflow/cli/src/__tests__/wu-prep-default-exec.test.ts
tests:
  manual:
    - Run full test suite and verify gates-graceful-degradation and wu-prep-default-exec tests pass
      without timeouts
  unit:
    - packages/@lumenflow/cli/src/__tests__/gates-graceful-degradation.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-prep-default-exec.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1670.done
dependencies: []
risks: []
notes: >-
  (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.


  Superseded by subsequent stability work (including WU-1678 incremental-run hardening).
  gates-graceful-degradation and wu-prep-default-exec timeout targets are non-reproducible on main
  and passed in repeated runs on 2026-02-14.


  [ADMIN-REPAIR 2026-02-14]: status changed from 'ready' to 'superseded'
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Dynamic import tests in gates-graceful-degradation.test.ts and
  wu-prep-default-exec.test.ts time out with 5000ms default timeout when running as part of full
  test suite due to heavyweight module graph resolution under concurrent I/O. Need to increase
  timeout or restructure imports.
acceptance:
  - Flaky timeout tests pass reliably when running as part of full test suite
