id: WU-2009
title: Add claim-validation gate for absolute acceptance criteria drift
lane: 'Framework: Core Validation'
type: feature
status: ready
priority: P2
created: 2026-02-22
code_paths:
  - packages/@lumenflow/core/src/validators
  - packages/@lumenflow/core/src/gates-config.ts
  - tools
  - scripts/hooks
  - docs/04-operations/tasks/wu
tests:
  manual: []
  unit:
    - packages/@lumenflow/core/src/__tests__/validators
    - packages/@lumenflow/cli/src/__tests__/gates-config.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2009.done
dependencies: []
initiative: INIT-033
phase: 5
spec_refs:
  - docs/04-operations/_frameworks/lumenflow/wu-sizing-guide.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: absolute acceptance claims (e.g., no runtime dependency, all commands use runCLI(main), no process.exit in core) drifted from live code without closure blockers. Problem: WUs can close with strong language while contradictory patterns still exist. Solution: add a gate that parses WU/initiative acceptance text for absolute claim patterns and runs targeted source scans; fail gate when contradictions are detected, with actionable mismatch output.'
acceptance:
  - New gate identifies absolute acceptance criteria in WU/initiative specs and evaluates mapped code predicates.
  - Gate fails when claims conflict with live code (including legacy config dependency, missing runCLI wrappers, and direct core process.exit usage).
  - Gate integrates with pnpm gates and outputs file/line evidence plus remediation hints.
  - Tests cover true positives, true negatives, and allowlist/override behavior for documented exceptions.
