id: WU-2153
title: Session lifecycle hooks for control-plane registration
lane: 'Framework: Agent'
type: feature
status: done
priority: P1
created: 2026-02-25
code_paths:
  - packages/@lumenflow/agent/src/auto-session-integration.ts
tests:
  manual:
    - pnpm gates
  unit:
    - packages/@lumenflow/agent/__tests__/auto-session-integration.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2153.done
dependencies: []
initiative: INIT-040
phase: 3
blocked_by:
  - WU-2149
plan: lumenflow://plans/clever-whistling-lobster.md
spec_refs:
  - /home/USER/.claude/plans/clever-whistling-lobster.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Add optional session register/deregister calls in startSessionForWU and endSessionForWU
  auto-session lifecycle hooks. Only active when control_plane is configured. Fail-open on all
  remote errors.
acceptance:
  - Session registered on wu:claim when control_plane configured
  - Session deregistered on wu:done when control_plane configured
  - No-op when control_plane not configured
  - Remote registration failure does not block claim or done
  - pnpm gates passes
claimed_mode: worktree
worktree_path: worktrees/framework-agent-wu-2153
claimed_at: 2026-03-02T00:05:19.371Z
baseline_main_sha: bc26558e3bdbb28dd3778f4a1e676066d8685d14
session_id: 64311f0d-af0b-447b-bbab-3f463a2fe285
approved_by:
  - tom@hellm.ai
approved_at: 2026-03-02T00:05:19.376Z
locked: true
completed_at: 2026-03-02T00:17:24.736Z
completed: 2026-03-02
