id: WU-1072
title: Fix wu:done staging whitelist for auto-generated docs + document wu:cleanup PR-only behavior
lane: 'Framework: CLI'
type: bug
status: done
priority: P2
created: 2026-01-23
code_paths:
  - packages/@lumenflow/cli/src/wu-done.ts
  - docs/04-operations/_frameworks/lumenflow/agent/onboarding/quick-ref-commands.md
tests:
  manual:
    - Verify documentation explains wu:cleanup is PR-only
  unit:
    - packages/@lumenflow/cli/src/__tests__/wu-done-staging-whitelist.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1072.done
dependencies: []
risks: []
notes: Completed per acceptance criteria.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: wu:done fails with 'Unexpected files staged' when turbo docs:generate creates MDX files
  in apps/docs/. The staging whitelist in wu-done.ts needs to include apps/docs/**/*.mdx.
  Additionally, agents don't know wu:cleanup is PR-only (requires merged PR when gh CLI available),
  causing confusion when they try to use it after wu:done failures.
acceptance:
  - Staging whitelist includes apps/docs/**/*.mdx pattern
  - wu:done succeeds when docs:generate creates new MDX files
  - 'Documentation updated: agents understand wu:cleanup is PR-only'
  - quick-ref-commands.md clarifies wu:done vs wu:cleanup usage
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-wu-1072
claimed_at: 2026-01-23T11:58:47.637Z
baseline_main_sha: d62f9e72107552000d362e334eaf3837603045e5
session_id: 941c42a8-d1b5-4c4b-9eaa-a71aa899ed6e
approved_by:
  - tom@hellm.ai
approved_at: 2026-01-23T11:58:47.642Z
locked: true
completed_at: 2026-01-23T12:25:00.667Z
