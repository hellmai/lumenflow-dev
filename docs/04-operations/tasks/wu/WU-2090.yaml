id: WU-2090
title: Migrate CLI runtime path/state literals to getConfig and constants
lane: 'Framework: CLI WU Commands'
type: refactor
status: ready
priority: P1
created: 2026-02-23
code_paths:
  - packages/@lumenflow/cli/src/wu-edit-validators.ts
  - packages/@lumenflow/cli/src/doctor.ts
  - packages/@lumenflow/cli/src/wu-edit.ts
  - packages/@lumenflow/cli/src/wu-claim.ts
  - packages/@lumenflow/cli/src/wu-claim-state.ts
  - packages/@lumenflow/cli/src/wu-block.ts
  - packages/@lumenflow/cli/src/wu-unblock.ts
  - packages/@lumenflow/cli/src/wu-release.ts
  - packages/@lumenflow/cli/src/wu-recover.ts
  - packages/@lumenflow/cli/src/wu-repair.ts
  - packages/@lumenflow/cli/src/wu-delete.ts
  - packages/@lumenflow/cli/src/wu-done.ts
  - packages/@lumenflow/cli/src/init-templates.ts
  - packages/@lumenflow/cli/src/gates-utils.ts
  - packages/@lumenflow/cli/src/gates-runners.ts
  - packages/@lumenflow/cli/src/wu-done-auto-cleanup.ts
tests:
  manual: []
  unit:
    - packages/@lumenflow/cli/src/__tests__/path-centralization-cli.test.ts
    - packages/@lumenflow/cli/src/__tests__/doctor.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-claim.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-done.test.ts
    - packages/@lumenflow/cli/src/__tests__/gates-utils.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-recover.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-repair-state-mode.test.ts
    - packages/@lumenflow/cli/src/__tests__/wu-done-auto-cleanup.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2090.done
dependencies: []
initiative: INIT-036
phase: 3
plan: lumenflow://plans/INIT-036-plan.md
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: Replace CLI runtime hardcoded docs/state/worktrees/origin-main literals with
  getConfig() and shared constants so commands behave correctly in consumer repositories with custom
  directory layouts.
acceptance:
  - CLI runtime commands resolve docs and wu paths from getConfig() rather than docs/04-operations
    string literals
  - CLI state path usage is sourced from getConfig().state.stateDir and no runtime .lumenflow/state
    literals remain in scoped files
  - CLI worktree/origin-main command defaults use config/constants instead of hardcoded strings
  - Existing CLI behavior remains unchanged under OS defaults and respects workspace overrides
  - wu-done auto-cleanup state/archive dirty-file prefix checks derive from config
    directories.stateDir and directories.archiveDir
