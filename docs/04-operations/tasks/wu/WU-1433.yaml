id: WU-1433
title: Init onboarding parity for scripts and docs paths
lane: 'Framework: CLI'
type: feature
status: done
priority: P2
created: 2026-02-04
code_paths:
  - packages/@lumenflow/cli/src/init.ts
  - packages/@lumenflow/cli/src/__tests__/init-scripts.test.ts
  - packages/@lumenflow/cli/src/__tests__/init-docs-structure.test.ts
  - packages/@lumenflow/cli/src/__tests__/init-onboarding-docs.test.ts
tests:
  manual:
    - Run pnpm exec lumenflow init in a clean temp repo and verify package.json scripts include
      docs:sync
    - gates:docs
    - and all public commands.
    - Run pnpm exec lumenflow init --docs-structure simple and verify docs/tasks + docs/_frameworks
      paths are used.
    - Run pnpm exec lumenflow init --docs-structure arc42 and verify docs/04-operations paths are
      used.
  unit:
    - packages/@lumenflow/cli/src/__tests__/init-scripts.test.ts
    - packages/@lumenflow/cli/src/__tests__/init-docs-structure.test.ts
    - packages/@lumenflow/cli/src/__tests__/init-onboarding-docs.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1433.done
dependencies:
  - WU-1432
spec_refs:
  - lumenflow://plans/WU-1433-plan.md
risks: []
notes: Depends on public manifest from WU-1432; init must derive scripts from manifest and apply
  alias mappings (docs:sync, gates:docs).
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: New customer onboarding relies on lumenflow init to scaffold scripts and
  docs. Problem: init injects only a subset of CLI scripts and templates hardcode arc42 paths,
  causing missing commands and path mismatches in simple structure. WU-1432 defines a public CLI
  manifest as source of truth, so init must derive scripts from that manifest to avoid drift.
  Solution: generate pnpm scripts from the public manifest (with required aliases) and parameterize
  templates/config to respect selected docs structure (simple or arc42).'
acceptance:
  - pnpm scripts are generated from the public CLI manifest (WU-1432) and expose all public
    commands, including required aliases (docs:sync, sync:templates, gates:docs).
  - Simple docs structure yields config + templates referencing docs/tasks and docs/_frameworks
    paths.
  - Arc42 docs structure yields config + templates referencing docs/04-operations paths.
  - Init scaffolding tests cover scripts + docs structure and pass.
claimed_mode: worktree
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-cli-wu-1433
claimed_at: 2026-02-06T13:50:42.279Z
baseline_main_sha: 0a25fef89acce01646ffdb1b4566311003e6da89
session_id: f0cb0d85-d037-4517-9d1c-5ca8d721e824
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-06T13:50:42.285Z
locked: true
completed_at: 2026-02-06T14:03:34.007Z
