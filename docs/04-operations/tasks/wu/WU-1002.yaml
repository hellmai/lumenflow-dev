id: WU-1002
title: Publish @lumenflow packages to npm
lane: Infrastructure
type: chore
status: in_progress
priority: P1
created: 2026-01-18
code_paths:
  - packages/@lumenflow/core/package.json
  - packages/@lumenflow/cli/package.json
  - packages/@lumenflow/memory/package.json
  - packages/@lumenflow/agent/package.json
  - packages/@lumenflow/metrics/package.json
  - packages/@lumenflow/initiatives/package.json
  - packages/@lumenflow/shims/package.json
  - .changeset/
  - package.json
tests:
  manual:
    - Verify changeset init creates .changeset/config.json
    - Verify pnpm changeset works after setup
  unit: []
  e2e: []
artifacts:
  - .beacon/stamps/WU-1002.done
dependencies:
  - WU-1001
risks:
  - npm org @lumenflow might be taken - fallback to @hellmai
notes: |
  Phase 2 of LumenFlow dogfooding plan.
  Prepares packages for npm publishing with changesets.
  Actual npm publish will be manual after this WU.
requires_review: false
assigned_to: tom@hellm.ai
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: |
  Configure @lumenflow/* packages for npm publishing.

  Context: LumenFlow is now self-hosted with working workflow (Phase 1 complete).
  Problem: Packages can't be published to npm without proper configuration.
  Solution: Add publishConfig to all 7 packages, setup changesets for versioning.
acceptance:
  - 'All 7 @lumenflow/* packages have publishConfig with access: restricted'
  - Changesets initialized with .changeset/config.json
  - Release scripts added to root package.json (prerelease, release, version)
  - pnpm changeset works without errors
  - pnpm format, lint, typecheck â†’ PASS
claimed_mode: worktree
worktree_path: worktrees/infrastructure-wu-1002
claimed_at: 2026-01-18T17:10:15.136Z
baseline_main_sha: 1fb88061f3574435fe8ad889e4db837f12b7f152
session_id: de4e1467-5fab-4e39-a266-923c94b940c2
approved_by:
  - tom@hellm.ai
approved_at: 2026-01-18T17:10:15.142Z
