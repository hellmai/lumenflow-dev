id: WU-1878
title: Marketplace Install to workspace button
lane: 'Content: Site Comms'
type: feature
status: in_progress
priority: P3
created: 2026-02-18
code_paths:
  - apps/web/app/api/registry/packs/[id]/install/route.ts
  - apps/web/src/components/marketplace-pack-detail.tsx
  - apps/web/src/server/pack-registry-route-adapters.ts
  - apps/web/src/components/marketplace-pack-detail-live.tsx
tests:
  manual:
    - Verify Install button triggers POST and installs pack to connected workspace
    - Verify button is disabled with tooltip when no workspace connected
  unit:
    - apps/web/app/api/registry/packs/[id]/__tests__/install.test.ts
    - apps/web/__tests__/install-pack-route.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1878.done
dependencies: []
initiative: INIT-031
phase: 6
blocked_by:
  - WU-1875
  - WU-1873
spec_refs:
  - .claude/plans/partitioned-sprouting-nest.md
risks: []
notes: 'Sizing: Medium (M). ~10-15 files, ~35 tool calls. Strategy: Single Session. Wave 6b (after
  6.1 + 5.5). Final WU â€” completes browse-to-install flow.'
requires_review: false
claimed_mode: worktree
assigned_to: tom@hellm.ai
claimed_at: 2026-02-18T23:52:04.500Z
worktree_path: /home/USER/source/hellmai/os/worktrees/content-site-comms-wu-1878
session_id: c49f6de7-1d22-4acf-88b7-5a1d760b151b
exposure: ui
escalation_triggers: []
requires_human_escalation: false
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-18T23:52:04.506Z
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: Pack marketplace page (WU-1840) shows pack details but has no install action.
  Problem: Users must use CLI to install packs after finding them in the marketplace. Solution: Add
  POST /api/registry/packs/:id/install endpoint accepting { workspaceRoot, version } that calls
  installPack(). Add Install to workspace button on MarketplacePackDetail component. Requires
  workspace connected (WU-1873) and registry fetch path (WU-1875).'
acceptance:
  - POST /api/registry/packs/:id/install endpoint accepts workspaceRoot and version, calls
    installPack()
  - Install to workspace button on MarketplacePackDetail triggers install API call
  - Button disabled when no workspace is connected with helpful tooltip
  - Success/error feedback shown after install attempt
