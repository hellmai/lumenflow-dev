id: WU-1545
title: Lock down dist imports and verify boundary
lane: 'Framework: Core Lifecycle'
type: refactor
status: in_progress
priority: P1
created: 2026-02-09
code_paths:
  - eslint.config.mjs
  - packages/@lumenflow/agent/src/agent-incidents.ts
  - tools/__tests__/subpath-exports.test.ts
  - tools/generate-cli-docs.ts
  - packages/@lumenflow/cli/templates/core/ai/onboarding/docs-generation.md.template
tests:
  manual:
    - '(auto) Manual check: verify acceptance criteria; add automated tests before changing code
      files.'
  unit:
    - tools/__tests__/subpath-exports.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1545.done
dependencies: []
initiative: INIT-020
phase: 3
blocked_by:
  - WU-1536
spec_refs:
  - lumenflow://plans/polished-frolicking-whale.md
risks: []
notes: >-
  Track C2 from enterprise hardening initiative. Split from original WU-1536. Depends on C1
  (WU-1536) completing first.


  Track C2 from enterprise hardening initiative. Split from original WU-1536. Depends on C1
  (WU-1536) completing first. TODO in eslint.config.mjs line 51 is pre-existing documentation
  comment, not incomplete work.
requires_review: false
claimed_mode: worktree
assigned_to: tom@hellm.ai
claimed_at: 2026-02-09T23:53:40.422Z
worktree_path: /home/tom/source/hellmai/os/worktrees/framework-core-lifecycle-wu-1545
session_id: cc01dbf5-c705-46bb-a813-2b7f2d534251
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
approved_by:
  - tom@hellm.ai
approved_at: 2026-02-09T23:53:40.430Z
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: After C1 codemods all dist imports to public subpaths, wildcard exports still
  exist. Problem: new dist imports can still be introduced. Solution: add no-restricted-imports lint
  rule, remove wildcard exports from all 4 packages, run full validation, verify zero dist-path
  usage repo-wide.'
acceptance:
  - no-restricted-imports lint rule blocks new dist/* imports as errors.
  - Wildcard dist and lib exports removed from core, memory, initiatives, and agent package.json
    files.
  - rg @lumenflow/.+/dist/ packages/ apps/ tools/ actions/ returns zero results.
