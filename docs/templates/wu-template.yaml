# Work Unit Template (LumenFlow WU Schema)
#
# Copy this template when creating new WUs. Fill in all required fields and
# remove optional fields if not needed.
#
# If you used "lumenflow init --full", this template lives at:
# docs/04-operations/tasks/templates/wu-template.yaml

# Required: Unique work unit identifier (format: WU-NNN)
id: WU-XXX

# Required: Short, descriptive title (max 80 chars)
title: 'Your WU title here'

# Required: Lane (Parent: Sublane format)
lane: 'Framework: CLI'

# Required: Type of work
type: 'feature' # feature | bug | documentation | process | tooling | chore | refactor
# NOTE: For feature/refactor WUs, load /skill design-first before implementation

# Required: Current status
status: 'ready' # ready | in_progress | blocked | done | cancelled

# Required: Priority
priority: P2 # P0 | P1 | P2 | P3

# Required: Creation date (YYYY-MM-DD)
created: 2026-01-21

# Required: Owner/assignee (email)
assigned_to: 'unassigned@example.com'

# Required: Description
description: |
  Context: ...
  Problem: ...
  Solution: ...

# Required: Acceptance criteria (testable, binary)
acceptance:
  - Criterion 1 (specific, measurable, testable)
  - Criterion 2 (binary pass/fail)
  - Documentation updated

# Required: References to plans/specs (required for type: feature)
# Tip: use `pnpm wu:create --plan` to generate a plan stub at lumenflow://plans/WU-XXX-plan.md
spec_refs:
  - lumenflow://plans/WU-XXX-plan.md

# Required: Code files changed or created (empty only for docs/process WUs)
# Docs-only WUs should use docs/ or *.md paths to avoid docs-only gate failures.
code_paths:
  - path/to/file.ts

# Required: Test paths (at least one of manual/unit/e2e/integration for non-doc WUs)
tests:
  manual:
    - Manual check: Verify behavior or docs output
  unit:
    - path/to/test.test.ts
  e2e: []
  integration: []

# Required: Exposure level
exposure: 'backend-only' # ui | api | backend-only | documentation

# Optional: User journey (recommended for ui/api)
# user_journey: |
#   User navigates to ...
#   User performs ...

# Optional: UI pairing WUs (for api exposure)
# ui_pairing_wus:
#   - WU-1234

# Optional: Navigation path (required when exposure=ui and no page file)
# navigation_path: '/settings'

# Required: Deliverable artifacts (stamps, docs, etc.)
artifacts:
  - .lumenflow/stamps/WU-XXX.done

# Optional: Dependencies (other WUs that must complete first)
dependencies: []

# Optional: Risks
risks:
  - Risk 1

# Optional: Notes (required by spec linter)
notes: 'Implementation notes, rollout context, or plan summary.'

# Optional: Requires human review
requires_review: false

# Optional: Claimed mode (worktree or branch-only)
# Automatically set by wu:claim, usually don't need to specify
# claimed_mode: worktree

# Optional: Assigned to (email of current claimant)
# Automatically set by wu:claim
# assigned_to: engineer@example.com

# Optional: Locked status (prevents concurrent edits)
# Automatically set by wu:claim and wu:done
# locked: false

# Optional: Completion date (ISO 8601 format)
# Automatically set by wu:done
# completed: 2025-10-23

# Optional: Completion notes (added by wu:done)
# completion_notes: |
#   Additional notes added during wu:done.
#   Any deviations from original plan.
#   Lessons learned.

# ============================================================================
# GOVERNANCE BLOCK (WU Schema v2.0)
# ============================================================================
# Optional: COS governance rules that apply to this WU
# Only include if this WU needs specific governance enforcement

# governance:
#   # Rules that apply to this WU (evaluated during cos:gates)
#   rules:
#     - rule_id: UPAIN-01
#       satisfied: false  # Initially false, set true when evidence provided
#       evidence:
#         - type: link
#           value: docs/product/voc/feature-user-pain.md
#           description: "Voice of Customer analysis showing user pain"
#       notes: |
#         VOC analysis shows 40% of support tickets request this feature.
#         Average time wasted: 15min/user/week.
#
#     - rule_id: CASH-03
#       satisfied: false
#       evidence:
#         - type: link
#           value: docs/finance/spend-reviews/2025-10-cloud-infra.md
#           description: "Spend review for £1200/month cloud infrastructure"
#         - type: approval
#           value: owner@example.com
#           description: "Owner approval for spend commitment"
#       notes: |
#         New cloud infrastructure commitment: £1200/month for 12 months.
#         ROI: Reduces latency by 50%, improves user retention.
#
#   # Gate checks (enforced by cos-gates.mjs)
#   gates:
#     narrative: "pending"  # Status: pending, passed, skipped, failed
#     finance: "pending"
#
#   # Exemptions (only if rule doesn't apply)
#   exemptions:
#     - rule_id: FAIR-01
#       reason: "No user-facing pricing changes in this WU"
#       approved_by: product-owner@example.com
#       approved_at: 2025-10-23

# ============================================================================
# USAGE NOTES
# ============================================================================
#
# 1. Remove this entire governance block if no COS rules apply to your WU
# 2. Only include rules that require enforcement (not all rules apply to all WUs)
# 3. Evidence types: link:, metric:, screenshot:, approval:
# 4. Gates are checked during wu:done (before merge)
# 5. Exemptions require approval from rule owner
#
# For more details, see:
# - docs/04-operations/_frameworks/cos/system-prompt-v1.3.md
# - docs/04-operations/_frameworks/cos/evidence-format.md
