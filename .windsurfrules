# Windsurf Rules for LumenFlow

CRITICAL: Before starting any work, read this file completely:
docs/04-operations/_frameworks/lumenflow/agent/onboarding/starting-prompt.md

This contains all the rules you must follow, including:
- How to claim and complete Work Units (WUs)
- Worktree discipline (never edit files in main checkout)
- Gate failures and recovery
- LUMENFLOW_FORCE usage
- Spawning sub-agents with wu:spawn

DO NOT skip reading the starting-prompt.md - it prevents the most common failures.

## Windsurf-Specific Guidance

You are running in the Windsurf IDE environment. When spawning sub-agents, use:

```bash
pnpm wu:spawn --id WU-XXXX --client windsurf
```

The `--client windsurf` flag identifies Windsurf as your IDE environment, regardless of which AI model Windsurf is using.

## Git Safety Wrapper

Prefer using the LumenFlow git wrapper instead of raw `git`:

```bash
./scripts/safe-git <git args>
```

This blocks destructive operations like `git reset --hard`, `git clean -fd`, `git push --force`, and manual `git worktree remove`.

Blocked actions are logged to:

`./.beacon/safety-blocks.log`

## Key Reminders for Windsurf Users

- Always work in the worktree, never main checkout
- Use relative paths from worktree root
- Run `pnpm gates` before `pnpm wu:done`
- Reference LUMENFLOW.md for complete workflow documentation

See also: LUMENFLOW.md
